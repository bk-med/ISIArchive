{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{MessageCircle,Send,Edit2,Trash2,Reply,User,Crown,Shield,Loader2,AlertTriangle}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{documentsAPI,commentsAPI}from'../../utils/api';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CommentSection=_ref=>{let{documentId,className=''}=_ref;const{user}=useAuth();const[comments,setComments]=useState([]);const[loading,setLoading]=useState(false);const[submitting,setSubmitting]=useState(false);const[newComment,setNewComment]=useState('');const[replyTo,setReplyTo]=useState(null);const[editingComment,setEditingComment]=useState(null);const[editContent,setEditContent]=useState('');const[canModerate,setCanModerate]=useState(false);useEffect(()=>{if(documentId){fetchComments();}},[documentId]);const fetchComments=async()=>{try{setLoading(true);const response=await documentsAPI.getDocumentComments(documentId);setComments(response.data);setCanModerate(response.canModerate||false);}catch(error){console.error('Error fetching comments:',error);toast.error('Erreur lors du chargement des commentaires');}finally{setLoading(false);}};const handleSubmitComment=async e=>{e.preventDefault();if(!newComment.trim())return;try{setSubmitting(true);await documentsAPI.createComment(documentId,{contenu:newComment,parentId:replyTo||undefined});setNewComment('');setReplyTo(null);await fetchComments();toast.success('Commentaire ajouté avec succès');}catch(error){console.error('Error creating comment:',error);toast.error('Erreur lors de l\\'ajout du commentaire');}finally{setSubmitting(false);}};const handleEditComment=async commentId=>{if(!editContent.trim())return;try{await commentsAPI.updateComment(commentId,{contenu:editContent});setEditingComment(null);setEditContent('');await fetchComments();toast.success('Commentaire modifié avec succès');}catch(error){console.error('Error updating comment:',error);toast.error('Erreur lors de la modification du commentaire');}};const handleDeleteComment=async commentId=>{if(!window.confirm('Êtes-vous sûr de vouloir supprimer ce commentaire ?'))return;try{await commentsAPI.deleteComment(commentId);await fetchComments();toast.success('Commentaire supprimé avec succès');}catch(error){console.error('Error deleting comment:',error);toast.error('Erreur lors de la suppression du commentaire');}};const startEdit=comment=>{setEditingComment(comment.id);setEditContent(comment.contenu);};const cancelEdit=()=>{setEditingComment(null);setEditContent('');};const canEditComment=comment=>{return(user===null||user===void 0?void 0:user.id)===comment.auteurId||(user===null||user===void 0?void 0:user.role)==='admin'||canModerate;};const canDeleteComment=comment=>{return(user===null||user===void 0?void 0:user.id)===comment.auteurId||(user===null||user===void 0?void 0:user.role)==='admin'||canModerate;};const getUserRoleIcon=role=>{switch(role){case'admin':return/*#__PURE__*/_jsx(Crown,{className:\"w-3 h-3 text-yellow-500\",title:\"Administrateur\"});case'professeur':return/*#__PURE__*/_jsx(Shield,{className:\"w-3 h-3 text-blue-500\",title:\"Professeur\"});default:return null;}};const getUserRoleColor=role=>{switch(role){case'admin':return'border-l-4 border-yellow-400 bg-yellow-50';case'professeur':return'border-l-4 border-blue-400 bg-blue-50';default:return'border-l-4 border-gray-200 bg-gray-50';}};const renderComment=function(comment){let isReply=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const isEditing=editingComment===comment.id;const roleColor=getUserRoleColor(comment.auteur.role);return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:\"\".concat(isReply?'ml-8 border-l-2 border-gray-200 pl-4':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-4 mb-4 \".concat(roleColor),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-primary-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[comment.auteur.prenom,\" \",comment.auteur.nom]}),getUserRoleIcon(comment.auteur.role)]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:new Date(comment.createdAt).toLocaleDateString('fr-FR',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[canEditComment(comment)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEdit(comment),className:\"p-1 text-gray-400 hover:text-gray-600 transition-colors\",title:\"Modifier\",children:/*#__PURE__*/_jsx(Edit2,{className:\"w-4 h-4\"})}),canDeleteComment(comment)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteComment(comment.id),className:\"p-1 text-gray-400 hover:text-red-600 transition-colors\",title:\"Supprimer\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})}),canModerate&&comment.auteur.id!==(user===null||user===void 0?void 0:user.id)&&/*#__PURE__*/_jsx(\"div\",{className:\"p-1\",title:\"Action de mod\\xE9ration disponible\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-4 h-4 text-orange-500\"})})]})]}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:editContent,onChange:e=>setEditContent(e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",rows:3}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditComment(comment.id),className:\"px-3 py-1 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors\",children:\"Sauvegarder\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors\",children:\"Annuler\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-2 whitespace-pre-wrap\",children:comment.contenu}),!isReply&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setReplyTo(comment.id),className:\"text-sm text-primary-600 hover:text-primary-800 flex items-center space-x-1 transition-colors\",children:[/*#__PURE__*/_jsx(Reply,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"R\\xE9pondre\"})]})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:comment.reponses&&comment.reponses.map(reply=>renderComment(reply,true))})]},comment.id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 \".concat(className),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5 text-gray-600\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:[\"Commentaires (\",comments.length,\")\"]}),canModerate&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 text-sm text-blue-600\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Mod\\xE9rateur\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitComment,className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:replyTo?\"Écrire une réponse...\":\"Ajouter un commentaire...\",className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",rows:3}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[replyTo&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setReplyTo(null),className:\"text-sm text-gray-500 hover:text-gray-700 transition-colors\",children:\"Annuler la r\\xE9ponse\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:submitting||!newComment.trim(),className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed ml-auto transition-colors\",children:[submitting?/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 mr-2 animate-spin\"}):/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4 mr-2\"}),replyTo?'Répondre':'Commenter']})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto space-y-4\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(Loader2,{className:\"w-6 h-6 animate-spin text-primary-600\"})}):comments.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"mx-auto h-8 w-8 text-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-500\",children:\"Aucun commentaire pour le moment.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-1\",children:\"Soyez le premier \\xE0 commenter ce document !\"})]}):/*#__PURE__*/_jsx(AnimatePresence,{children:comments.filter(comment=>!comment.parentId)// Only show top-level comments\n.map(comment=>renderComment(comment))})})]});};export default CommentSection;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","MessageCircle","Send","Edit2","Trash2","Reply","User","Crown","Shield","Loader2","AlertTriangle","useAuth","documentsAPI","commentsAPI","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CommentSection","_ref","documentId","className","user","comments","setComments","loading","setLoading","submitting","setSubmitting","newComment","setNewComment","replyTo","setReplyTo","editingComment","setEditingComment","editContent","setEditContent","canModerate","setCanModerate","fetchComments","response","getDocumentComments","data","error","console","handleSubmitComment","e","preventDefault","trim","createComment","contenu","parentId","undefined","success","handleEditComment","commentId","updateComment","handleDeleteComment","window","confirm","deleteComment","startEdit","comment","id","cancelEdit","canEditComment","auteurId","role","canDeleteComment","getUserRoleIcon","title","getUserRoleColor","renderComment","isReply","arguments","length","isEditing","roleColor","auteur","div","initial","opacity","y","animate","concat","children","prenom","nom","Date","createdAt","toLocaleDateString","year","month","day","hour","minute","onClick","value","onChange","target","rows","reponses","map","reply","onSubmit","placeholder","type","disabled","filter"],"sources":["/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/src/components/ui/CommentSection.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  MessageCircle,\n  Send,\n  Edit2,\n  Trash2,\n  Reply,\n  User,\n  Crown,\n  Shield,\n  Loader2,\n  AlertTriangle\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { documentsAPI, commentsAPI } from '../../utils/api';\nimport { Comment } from '../../types';\nimport toast from 'react-hot-toast';\n\ninterface CommentSectionProps {\n  documentId: string;\n  className?: string;\n}\n\nconst CommentSection: React.FC<CommentSectionProps> = ({\n  documentId,\n  className = ''\n}) => {\n  const { user } = useAuth();\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [newComment, setNewComment] = useState('');\n  const [replyTo, setReplyTo] = useState<string | null>(null);\n  const [editingComment, setEditingComment] = useState<string | null>(null);\n  const [editContent, setEditContent] = useState('');\n  const [canModerate, setCanModerate] = useState(false);\n\n  useEffect(() => {\n    if (documentId) {\n      fetchComments();\n    }\n  }, [documentId]);\n\n  const fetchComments = async () => {\n    try {\n      setLoading(true);\n      const response = await documentsAPI.getDocumentComments(documentId);\n      setComments(response.data);\n      setCanModerate(response.canModerate || false);\n    } catch (error) {\n      console.error('Error fetching comments:', error);\n      toast.error('Erreur lors du chargement des commentaires');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmitComment = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newComment.trim()) return;\n\n    try {\n      setSubmitting(true);\n      await documentsAPI.createComment(documentId, {\n        contenu: newComment,\n        parentId: replyTo || undefined\n      });\n      \n      setNewComment('');\n      setReplyTo(null);\n      await fetchComments();\n      toast.success('Commentaire ajouté avec succès');\n    } catch (error) {\n      console.error('Error creating comment:', error);\n      toast.error('Erreur lors de l\\'ajout du commentaire');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleEditComment = async (commentId: string) => {\n    if (!editContent.trim()) return;\n\n    try {\n      await commentsAPI.updateComment(commentId, {\n        contenu: editContent\n      });\n      \n      setEditingComment(null);\n      setEditContent('');\n      await fetchComments();\n      toast.success('Commentaire modifié avec succès');\n    } catch (error) {\n      console.error('Error updating comment:', error);\n      toast.error('Erreur lors de la modification du commentaire');\n    }\n  };\n\n  const handleDeleteComment = async (commentId: string) => {\n    if (!window.confirm('Êtes-vous sûr de vouloir supprimer ce commentaire ?')) return;\n\n    try {\n      await commentsAPI.deleteComment(commentId);\n      await fetchComments();\n      toast.success('Commentaire supprimé avec succès');\n    } catch (error) {\n      console.error('Error deleting comment:', error);\n      toast.error('Erreur lors de la suppression du commentaire');\n    }\n  };\n\n  const startEdit = (comment: Comment) => {\n    setEditingComment(comment.id);\n    setEditContent(comment.contenu);\n  };\n\n  const cancelEdit = () => {\n    setEditingComment(null);\n    setEditContent('');\n  };\n\n  const canEditComment = (comment: Comment) => {\n    return user?.id === comment.auteurId || user?.role === 'admin' || canModerate;\n  };\n\n  const canDeleteComment = (comment: Comment) => {\n    return user?.id === comment.auteurId || user?.role === 'admin' || canModerate;\n  };\n\n  const getUserRoleIcon = (role: string) => {\n    switch (role) {\n      case 'admin':\n        return <Crown className=\"w-3 h-3 text-yellow-500\" title=\"Administrateur\" />;\n      case 'professeur':\n        return <Shield className=\"w-3 h-3 text-blue-500\" title=\"Professeur\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getUserRoleColor = (role: string) => {\n    switch (role) {\n      case 'admin':\n        return 'border-l-4 border-yellow-400 bg-yellow-50';\n      case 'professeur':\n        return 'border-l-4 border-blue-400 bg-blue-50';\n      default:\n        return 'border-l-4 border-gray-200 bg-gray-50';\n    }\n  };\n\n  const renderComment = (comment: Comment, isReply = false) => {\n    const isEditing = editingComment === comment.id;\n    const roleColor = getUserRoleColor(comment.auteur.role);\n    \n    return (\n      <motion.div\n        key={comment.id}\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`${isReply ? 'ml-8 border-l-2 border-gray-200 pl-4' : ''}`}\n      >\n        <div className={`rounded-lg p-4 mb-4 ${roleColor}`}>\n          <div className=\"flex items-start justify-between mb-2\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\">\n                <User className=\"w-4 h-4 text-primary-600\" />\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div>\n                  <div className=\"flex items-center space-x-1\">\n                    <p className=\"text-sm font-medium text-gray-900\">\n                      {comment.auteur.prenom} {comment.auteur.nom}\n                    </p>\n                    {getUserRoleIcon(comment.auteur.role)}\n                  </div>\n                  <p className=\"text-xs text-gray-500\">\n                    {new Date(comment.createdAt).toLocaleDateString('fr-FR', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-1\">\n              {canEditComment(comment) && (\n                <button\n                  onClick={() => startEdit(comment)}\n                  className=\"p-1 text-gray-400 hover:text-gray-600 transition-colors\"\n                  title=\"Modifier\"\n                >\n                  <Edit2 className=\"w-4 h-4\" />\n                </button>\n              )}\n              {canDeleteComment(comment) && (\n                <button\n                  onClick={() => handleDeleteComment(comment.id)}\n                  className=\"p-1 text-gray-400 hover:text-red-600 transition-colors\"\n                  title=\"Supprimer\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </button>\n              )}\n              {(canModerate && comment.auteur.id !== user?.id) && (\n                <div className=\"p-1\" title=\"Action de modération disponible\">\n                  <AlertTriangle className=\"w-4 h-4 text-orange-500\" />\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {isEditing ? (\n            <div className=\"space-y-2\">\n              <textarea\n                value={editContent}\n                onChange={(e) => setEditContent(e.target.value)}\n                className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                rows={3}\n              />\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => handleEditComment(comment.id)}\n                  className=\"px-3 py-1 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors\"\n                >\n                  Sauvegarder\n                </button>\n                <button\n                  onClick={cancelEdit}\n                  className=\"px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors\"\n                >\n                  Annuler\n                </button>\n              </div>\n            </div>\n          ) : (\n            <>\n              <p className=\"text-gray-700 mb-2 whitespace-pre-wrap\">{comment.contenu}</p>\n              {!isReply && (\n                <button\n                  onClick={() => setReplyTo(comment.id)}\n                  className=\"text-sm text-primary-600 hover:text-primary-800 flex items-center space-x-1 transition-colors\"\n                >\n                  <Reply className=\"w-3 h-3\" />\n                  <span>Répondre</span>\n                </button>\n              )}\n            </>\n          )}\n        </div>\n        \n        {/* Render replies */}\n        <AnimatePresence>\n          {comment.reponses && comment.reponses.map(reply => renderComment(reply, true))}\n        </AnimatePresence>\n      </motion.div>\n    );\n  };\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      <div className=\"flex items-center space-x-2\">\n        <MessageCircle className=\"w-5 h-5 text-gray-600\" />\n        <h4 className=\"text-lg font-medium text-gray-900\">\n          Commentaires ({comments.length})\n        </h4>\n        {canModerate && (\n          <div className=\"flex items-center space-x-1 text-sm text-blue-600\">\n            <Shield className=\"w-4 h-4\" />\n            <span>Modérateur</span>\n          </div>\n        )}\n      </div>\n\n      {/* New Comment Form */}\n      <form onSubmit={handleSubmitComment} className=\"space-y-3\">\n        <textarea\n          value={newComment}\n          onChange={(e) => setNewComment(e.target.value)}\n          placeholder={replyTo ? \"Écrire une réponse...\" : \"Ajouter un commentaire...\"}\n          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n          rows={3}\n        />\n        <div className=\"flex items-center justify-between\">\n          {replyTo && (\n            <button\n              type=\"button\"\n              onClick={() => setReplyTo(null)}\n              className=\"text-sm text-gray-500 hover:text-gray-700 transition-colors\"\n            >\n              Annuler la réponse\n            </button>\n          )}\n          <button\n            type=\"submit\"\n            disabled={submitting || !newComment.trim()}\n            className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed ml-auto transition-colors\"\n          >\n            {submitting ? (\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n            ) : (\n              <Send className=\"w-4 h-4 mr-2\" />\n            )}\n            {replyTo ? 'Répondre' : 'Commenter'}\n          </button>\n        </div>\n      </form>\n\n      {/* Comments List */}\n      <div className=\"max-h-96 overflow-y-auto space-y-4\">\n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader2 className=\"w-6 h-6 animate-spin text-primary-600\" />\n          </div>\n        ) : comments.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <MessageCircle className=\"mx-auto h-8 w-8 text-gray-400\" />\n            <p className=\"mt-2 text-sm text-gray-500\">\n              Aucun commentaire pour le moment.\n            </p>\n            <p className=\"text-xs text-gray-400 mt-1\">\n              Soyez le premier à commenter ce document !\n            </p>\n          </div>\n        ) : (\n          <AnimatePresence>\n            {comments\n              .filter(comment => !comment.parentId) // Only show top-level comments\n              .map(comment => renderComment(comment))}\n          </AnimatePresence>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CommentSection; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}