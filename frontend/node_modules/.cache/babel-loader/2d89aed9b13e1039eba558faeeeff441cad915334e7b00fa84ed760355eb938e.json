{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Users,Plus,Search,Edit,Trash2,UserCheck,UserX}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{usersAPI,academicAPI}from'../../utils/api';import Card from'../../components/ui/Card';import Button from'../../components/ui/Button';import Input from'../../components/ui/Input';import Modal from'../../components/ui/Modal';import UserForm from'../../components/forms/UserForm';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserManagement=()=>{const{user:currentUser}=useAuth();const[users,setUsers]=useState([]);const[stats,setStats]=useState(null);const[niveaux,setNiveaux]=useState([]);const[filieres,setFilieres]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[roleFilter,setRoleFilter]=useState('');const[statusFilter,setStatusFilter]=useState('');const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[selectedUsers,setSelectedUsers]=useState([]);const[showCreateModal,setShowCreateModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[editingUser,setEditingUser]=useState(null);const[showDeleteModal,setShowDeleteModal]=useState(false);const[deletingUser,setDeletingUser]=useState(null);const itemsPerPage=10;useEffect(()=>{fetchUsers();fetchStats();fetchAcademicData();},[currentPage,searchTerm,roleFilter,statusFilter]);const fetchUsers=async()=>{try{var _response$data$pagina;setLoading(true);const response=await usersAPI.getUsers({page:currentPage,limit:itemsPerPage,search:searchTerm||undefined,role:roleFilter||undefined,isActive:statusFilter?statusFilter==='active':undefined});// The backend returns { data: { users: [...], pagination: {...} } }\nconst usersData=Array.isArray(response.data.users)?response.data.users:[];setUsers(usersData);setTotalPages(((_response$data$pagina=response.data.pagination)===null||_response$data$pagina===void 0?void 0:_response$data$pagina.totalPages)||1);}catch(error){console.error('Error fetching users:',error);toast.error('Erreur lors du chargement des utilisateurs');setUsers([]);// Set empty array on error\n}finally{setLoading(false);}};const fetchStats=async()=>{try{const response=await usersAPI.getUserStats();setStats(response.data.stats);}catch(error){console.error('Error fetching stats:',error);setStats(null);// Reset stats on error\n}};const fetchAcademicData=async()=>{try{const[niveauxRes,filieresRes]=await Promise.all([academicAPI.getNiveaux(),academicAPI.getFilieres()]);setNiveaux(Array.isArray(niveauxRes.data)?niveauxRes.data:[]);setFilieres(Array.isArray(filieresRes.data)?filieresRes.data:[]);}catch(error){console.error('Error fetching academic data:',error);setNiveaux([]);setFilieres([]);}};const handleCreateUser=async userData=>{try{await usersAPI.createUser(userData);toast.success('Utilisateur créé avec succès');setShowCreateModal(false);fetchUsers();fetchStats();}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Erreur lors de la création');}};const handleUpdateUser=async userData=>{if(!editingUser)return;try{await usersAPI.updateUser(editingUser.id,userData);toast.success('Utilisateur mis à jour avec succès');setShowEditModal(false);setEditingUser(null);fetchUsers();fetchStats();}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Erreur lors de la mise à jour');}};const handleDeleteUser=async()=>{if(!deletingUser)return;try{await usersAPI.deleteUser(deletingUser.id);toast.success('Utilisateur supprimé avec succès');setShowDeleteModal(false);setDeletingUser(null);fetchUsers();fetchStats();}catch(error){var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Erreur lors de la suppression');}};const handleToggleStatus=async userId=>{try{await usersAPI.toggleUserStatus(userId);toast.success('Statut modifié avec succès');fetchUsers();fetchStats();}catch(error){var _error$response4,_error$response4$data;toast.error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Erreur lors de la modification');}};const handleBulkUpdate=async updateData=>{if(selectedUsers.length===0)return;try{await usersAPI.bulkUpdateUsers({userIds:selectedUsers,updateData});toast.success(\"\".concat(selectedUsers.length,\" utilisateur(s) mis \\xE0 jour\"));setSelectedUsers([]);fetchUsers();fetchStats();}catch(error){var _error$response5,_error$response5$data;toast.error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Erreur lors de la mise à jour');}};const toggleUserSelection=userId=>{setSelectedUsers(prev=>prev.includes(userId)?prev.filter(id=>id!==userId):[...prev,userId]);};const selectAllUsers=()=>{if(!Array.isArray(users))return;// Safety check\nif(selectedUsers.length===users.length){setSelectedUsers([]);}else{setSelectedUsers(users.map(user=>user.id));}};const containerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:0.1}}};const itemVariants={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:0.5}}};const getRoleColor=role=>{switch(role){case'admin':return'bg-red-100 text-red-800';case'professeur':return'bg-blue-100 text-blue-800';case'etudiant':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};const getStatusColor=isActive=>{return isActive?'bg-green-100 text-green-800':'bg-red-100 text-red-800';};return/*#__PURE__*/_jsx(motion.div,{variants:containerVariants,initial:\"hidden\",animate:\"visible\",className:\"space-y-6\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-secondary-600\",children:\"Chargement...\"})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(motion.div,{variants:itemVariants,className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-secondary-900\",children:\"Gestion des Utilisateurs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-secondary-600\",children:\"G\\xE9rez les comptes utilisateurs de la plateforme\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>setShowCreateModal(true),leftIcon:/*#__PURE__*/_jsx(Plus,{}),className:\"bg-primary-600 hover:bg-primary-700\",children:\"Nouvel Utilisateur\"})]}),stats&&/*#__PURE__*/_jsxs(motion.div,{variants:itemVariants,className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-blue-100\",children:/*#__PURE__*/_jsx(Users,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Total\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.totalUsers})]})]})}),/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-green-100\",children:/*#__PURE__*/_jsx(UserCheck,{className:\"h-6 w-6 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Actifs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.activeUsers})]})]})}),/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-red-100\",children:/*#__PURE__*/_jsx(UserX,{className:\"h-6 w-6 text-red-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Inactifs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.inactiveUsers})]})]})}),/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-purple-100\",children:/*#__PURE__*/_jsx(Users,{className:\"h-6 w-6 text-purple-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Professeurs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.roleDistribution.professeur})]})]})})]}),/*#__PURE__*/_jsx(motion.div,{variants:itemVariants,children:/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"Rechercher par email, pr\\xE9nom ou nom...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),leftIcon:/*#__PURE__*/_jsx(Search,{})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:roleFilter,onChange:e=>setRoleFilter(e.target.value),className:\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les r\\xF4les\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"professeur\",children:\"Professeur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"etudiant\",children:\"\\xC9tudiant\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les statuts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Actif\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactif\"})]})]})]})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:selectedUsers.length>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"bg-primary-50 border border-primary-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary-700 font-medium\",children:[selectedUsers.length,\" utilisateur(s) s\\xE9lectionn\\xE9(s)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>handleBulkUpdate({isActive:true}),children:\"Activer\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>handleBulkUpdate({isActive:false}),children:\"D\\xE9sactiver\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>setSelectedUsers([]),children:\"Annuler\"})]})]})})}),/*#__PURE__*/_jsx(motion.div,{variants:itemVariants,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-secondary-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-secondary-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 text-left w-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUsers.length===users.length&&users.length>0,onChange:selectAllUsers,className:\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-2/5\",children:\"Utilisateur\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\",children:\"R\\xF4le\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-1/5\",children:\"Fili\\xE8re\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-16\",children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\",children:\"Cr\\xE9\\xE9 le\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-xs font-medium text-secondary-500 uppercase tracking-wider w-24\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-secondary-200\",children:/*#__PURE__*/_jsx(AnimatePresence,{children:Array.isArray(users)&&users.length>0?users.map((user,index)=>{var _user$filiere;return/*#__PURE__*/_jsxs(motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:index*0.05},className:\"hover:bg-secondary-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUsers.includes(user.id),onChange:()=>toggleUserSelection(user.id),className:\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 w-6 bg-primary-100 rounded-full flex items-center justify-center mr-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary-600 font-medium text-xs\",children:[user.prenom.charAt(0),user.nom.charAt(0)]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-medium text-secondary-900 truncate\",children:[user.prenom,\" \",user.nom]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-secondary-500 truncate\",children:user.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-1 py-0.5 text-xs font-semibold rounded \".concat(getRoleColor(user.role)),children:user.role})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-xs text-secondary-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"truncate\",children:((_user$filiere=user.filiere)===null||_user$filiere===void 0?void 0:_user$filiere.nom)||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex px-1 py-0.5 text-xs font-semibold rounded \".concat(getStatusColor(user.isActive)),children:[/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:user.isActive?'Actif':'Inactif'}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:user.isActive?'OK':'KO'})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-xs text-secondary-500\",children:new Date(user.createdAt).toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',year:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{title:\"Modifier\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:()=>{setEditingUser(user);setShowEditModal(true);},className:\"p-1 h-6 w-6\",children:/*#__PURE__*/_jsx(Edit,{className:\"h-3 w-3\"})})}),/*#__PURE__*/_jsx(\"div\",{title:user.isActive?'Désactiver':'Activer',children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:()=>handleToggleStatus(user.id),className:\"p-1 h-6 w-6 \".concat(user.isActive?'text-red-600 hover:text-red-700':'text-green-600 hover:text-green-700'),children:user.isActive?/*#__PURE__*/_jsx(UserX,{className:\"h-3 w-3\"}):/*#__PURE__*/_jsx(UserCheck,{className:\"h-3 w-3\"})})}),/*#__PURE__*/_jsx(\"div\",{title:\"Supprimer\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:()=>{setDeletingUser(user);setShowDeleteModal(true);},className:\"p-1 h-6 w-6 text-red-600 hover:text-red-700\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-3 w-3\"})})})]})})]},user.id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:7,className:\"px-6 py-12 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-secondary-500\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Users,{className:\"h-12 w-12 mx-auto text-secondary-300 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium text-secondary-900 mb-2\",children:\"Aucun utilisateur trouv\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-secondary-500\",children:searchTerm||roleFilter||statusFilter?'Aucun utilisateur ne correspond à vos critères de recherche.':'Commencez par créer votre premier utilisateur.'})]})})})})})})]})}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-t border-secondary-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-secondary-700\",children:[\"Page \",currentPage,\" sur \",totalPages]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>setCurrentPage(prev=>Math.max(1,prev-1)),disabled:currentPage===1,children:\"Pr\\xE9c\\xE9dent\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>setCurrentPage(prev=>Math.min(totalPages,prev+1)),disabled:currentPage===totalPages,children:\"Suivant\"})]})]})})]})}),/*#__PURE__*/_jsx(Modal,{isOpen:showCreateModal,onClose:()=>setShowCreateModal(false),title:\"Cr\\xE9er un nouvel utilisateur\",size:\"lg\",children:/*#__PURE__*/_jsx(UserForm,{onSubmit:handleCreateUser,onCancel:()=>setShowCreateModal(false),niveaux:niveaux,filieres:filieres})}),/*#__PURE__*/_jsx(Modal,{isOpen:showEditModal,onClose:()=>{setShowEditModal(false);setEditingUser(null);},title:\"Modifier l'utilisateur\",size:\"lg\",children:editingUser&&/*#__PURE__*/_jsx(UserForm,{user:editingUser,onSubmit:handleUpdateUser,onCancel:()=>{setShowEditModal(false);setEditingUser(null);},niveaux:niveaux,filieres:filieres,isEditing:true})}),/*#__PURE__*/_jsx(Modal,{isOpen:showDeleteModal,onClose:()=>{setShowDeleteModal(false);setDeletingUser(null);},title:\"Confirmer la suppression\",children:deletingUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-secondary-600\",children:[\"\\xCAtes-vous s\\xFBr de vouloir supprimer l'utilisateur\",' ',/*#__PURE__*/_jsxs(\"strong\",{children:[deletingUser.prenom,\" \",deletingUser.nom]}),\" ?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:\"Cette action est irr\\xE9versible.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>{setShowDeleteModal(false);setDeletingUser(null);},children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleDeleteUser,children:\"Supprimer\"})]})]})})]})});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","Users","Plus","Search","Edit","Trash2","UserCheck","UserX","useAuth","usersAPI","academicAPI","Card","Button","Input","Modal","UserForm","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserManagement","user","currentUser","users","setUsers","stats","setStats","niveaux","setNiveaux","filieres","setFilieres","loading","setLoading","searchTerm","setSearchTerm","roleFilter","setRoleFilter","statusFilter","setStatusFilter","currentPage","setCurrentPage","totalPages","setTotalPages","selectedUsers","setSelectedUsers","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","editingUser","setEditingUser","showDeleteModal","setShowDeleteModal","deletingUser","setDeletingUser","itemsPerPage","fetchUsers","fetchStats","fetchAcademicData","_response$data$pagina","response","getUsers","page","limit","search","undefined","role","isActive","usersData","Array","isArray","data","pagination","error","console","getUserStats","niveauxRes","filieresRes","Promise","all","getNiveaux","getFilieres","handleCreateUser","userData","createUser","success","_error$response","_error$response$data","message","handleUpdateUser","updateUser","id","_error$response2","_error$response2$data","handleDeleteUser","deleteUser","_error$response3","_error$response3$data","handleToggleStatus","userId","toggleUserStatus","_error$response4","_error$response4$data","handleBulkUpdate","updateData","length","bulkUpdateUsers","userIds","concat","_error$response5","_error$response5$data","toggleUserSelection","prev","includes","filter","selectAllUsers","map","containerVariants","hidden","opacity","visible","transition","staggerChildren","itemVariants","y","duration","getRoleColor","getStatusColor","div","variants","initial","animate","className","children","onClick","leftIcon","totalUsers","activeUsers","inactiveUsers","roleDistribution","professeur","placeholder","value","onChange","e","target","exit","size","variant","type","checked","index","_user$filiere","tr","x","delay","prenom","charAt","nom","email","filiere","Date","createdAt","toLocaleDateString","day","month","year","title","colSpan","Math","max","disabled","min","isOpen","onClose","onSubmit","onCancel","isEditing"],"sources":["/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/src/pages/admin/UserManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Users,\n  Plus,\n  Search,\n  Filter,\n  Edit,\n  Trash2,\n  MoreVertical,\n  UserCheck,\n  UserX,\n  Eye,\n  Download,\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { usersAPI, academicAPI } from '../../utils/api';\nimport { User, CreateUserData, UpdateUserData, Niveau, Filiere } from '../../types';\nimport Card from '../../components/ui/Card';\nimport Button from '../../components/ui/Button';\nimport Input from '../../components/ui/Input';\nimport Modal from '../../components/ui/Modal';\nimport UserForm from '../../components/forms/UserForm';\nimport toast from 'react-hot-toast';\n\ninterface UserStats {\n  totalUsers: number;\n  activeUsers: number;\n  inactiveUsers: number;\n  roleDistribution: {\n    admin: number;\n    professeur: number;\n    etudiant: number;\n  };\n}\n\nconst UserManagement: React.FC = () => {\n  const { user: currentUser } = useAuth();\n  const [users, setUsers] = useState<User[]>([]);\n  const [stats, setStats] = useState<UserStats | null>(null);\n  const [niveaux, setNiveaux] = useState<Niveau[]>([]);\n  const [filieres, setFilieres] = useState<Filiere[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [roleFilter, setRoleFilter] = useState<string>('');\n  const [statusFilter, setStatusFilter] = useState<string>('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [selectedUsers, setSelectedUsers] = useState<string[]>([]);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingUser, setEditingUser] = useState<User | null>(null);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deletingUser, setDeletingUser] = useState<User | null>(null);\n\n  const itemsPerPage = 10;\n\n  useEffect(() => {\n    fetchUsers();\n    fetchStats();\n    fetchAcademicData();\n  }, [currentPage, searchTerm, roleFilter, statusFilter]);\n\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      const response = await usersAPI.getUsers({\n        page: currentPage,\n        limit: itemsPerPage,\n        search: searchTerm || undefined,\n        role: roleFilter || undefined,\n        isActive: statusFilter ? statusFilter === 'active' : undefined,\n      });\n      \n      // The backend returns { data: { users: [...], pagination: {...} } }\n      const usersData = Array.isArray(response.data.users) ? response.data.users : [];\n      setUsers(usersData);\n      setTotalPages(response.data.pagination?.totalPages || 1);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      toast.error('Erreur lors du chargement des utilisateurs');\n      setUsers([]); // Set empty array on error\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchStats = async () => {\n    try {\n      const response = await usersAPI.getUserStats();\n      setStats(response.data.stats);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n      setStats(null); // Reset stats on error\n    }\n  };\n\n  const fetchAcademicData = async () => {\n    try {\n      const [niveauxRes, filieresRes] = await Promise.all([\n        academicAPI.getNiveaux(),\n        academicAPI.getFilieres(),\n      ]);\n      setNiveaux(Array.isArray(niveauxRes.data) ? niveauxRes.data : []);\n      setFilieres(Array.isArray(filieresRes.data) ? filieresRes.data : []);\n    } catch (error) {\n      console.error('Error fetching academic data:', error);\n      setNiveaux([]);\n      setFilieres([]);\n    }\n  };\n\n  const handleCreateUser = async (userData: CreateUserData | UpdateUserData) => {\n    try {\n      await usersAPI.createUser(userData as CreateUserData);\n      toast.success('Utilisateur créé avec succès');\n      setShowCreateModal(false);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la création');\n    }\n  };\n\n  const handleUpdateUser = async (userData: CreateUserData | UpdateUserData) => {\n    if (!editingUser) return;\n    try {\n      await usersAPI.updateUser(editingUser.id, userData as UpdateUserData);\n      toast.success('Utilisateur mis à jour avec succès');\n      setShowEditModal(false);\n      setEditingUser(null);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la mise à jour');\n    }\n  };\n\n  const handleDeleteUser = async () => {\n    if (!deletingUser) return;\n    try {\n      await usersAPI.deleteUser(deletingUser.id);\n      toast.success('Utilisateur supprimé avec succès');\n      setShowDeleteModal(false);\n      setDeletingUser(null);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la suppression');\n    }\n  };\n\n  const handleToggleStatus = async (userId: string) => {\n    try {\n      await usersAPI.toggleUserStatus(userId);\n      toast.success('Statut modifié avec succès');\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la modification');\n    }\n  };\n\n  const handleBulkUpdate = async (updateData: Partial<UpdateUserData>) => {\n    if (selectedUsers.length === 0) return;\n    try {\n      await usersAPI.bulkUpdateUsers({\n        userIds: selectedUsers,\n        updateData,\n      });\n      toast.success(`${selectedUsers.length} utilisateur(s) mis à jour`);\n      setSelectedUsers([]);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la mise à jour');\n    }\n  };\n\n  const toggleUserSelection = (userId: string) => {\n    setSelectedUsers(prev =>\n      prev.includes(userId)\n        ? prev.filter(id => id !== userId)\n        : [...prev, userId]\n    );\n  };\n\n  const selectAllUsers = () => {\n    if (!Array.isArray(users)) return; // Safety check\n    \n    if (selectedUsers.length === users.length) {\n      setSelectedUsers([]);\n    } else {\n      setSelectedUsers(users.map(user => user.id));\n    }\n  };\n\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.1,\n      },\n    },\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      transition: {\n        duration: 0.5,\n      },\n    },\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'admin':\n        return 'bg-red-100 text-red-800';\n      case 'professeur':\n        return 'bg-blue-100 text-blue-800';\n      case 'etudiant':\n        return 'bg-green-100 text-green-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusColor = (isActive: boolean) => {\n    return isActive\n      ? 'bg-green-100 text-green-800'\n      : 'bg-red-100 text-red-800';\n  };\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      className=\"space-y-6\"\n    >\n      {loading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto\"></div>\n            <p className=\"mt-4 text-secondary-600\">Chargement...</p>\n          </div>\n        </div>\n      ) : (\n        <>\n          {/* Header */}\n          <motion.div variants={itemVariants} className=\"flex justify-between items-center\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-secondary-900\">Gestion des Utilisateurs</h1>\n              <p className=\"text-secondary-600\">Gérez les comptes utilisateurs de la plateforme</p>\n            </div>\n            <Button\n              onClick={() => setShowCreateModal(true)}\n              leftIcon={<Plus />}\n              className=\"bg-primary-600 hover:bg-primary-700\"\n            >\n              Nouvel Utilisateur\n            </Button>\n          </motion.div>\n\n          {/* Stats Cards */}\n          {stats && (\n            <motion.div variants={itemVariants} className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              <Card className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-blue-100\">\n                    <Users className=\"h-6 w-6 text-blue-600\" />\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-secondary-600\">Total</p>\n                    <p className=\"text-2xl font-bold text-secondary-900\">{stats.totalUsers}</p>\n                  </div>\n                </div>\n              </Card>\n              \n              <Card className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-green-100\">\n                    <UserCheck className=\"h-6 w-6 text-green-600\" />\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-secondary-600\">Actifs</p>\n                    <p className=\"text-2xl font-bold text-secondary-900\">{stats.activeUsers}</p>\n                  </div>\n                </div>\n              </Card>\n              \n              <Card className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-red-100\">\n                    <UserX className=\"h-6 w-6 text-red-600\" />\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-secondary-600\">Inactifs</p>\n                    <p className=\"text-2xl font-bold text-secondary-900\">{stats.inactiveUsers}</p>\n                  </div>\n                </div>\n              </Card>\n              \n              <Card className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-purple-100\">\n                    <Users className=\"h-6 w-6 text-purple-600\" />\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-secondary-600\">Professeurs</p>\n                    <p className=\"text-2xl font-bold text-secondary-900\">{stats.roleDistribution.professeur}</p>\n                  </div>\n                </div>\n              </Card>\n            </motion.div>\n          )}\n\n          {/* Filters and Search */}\n          <motion.div variants={itemVariants}>\n            <Card className=\"p-6\">\n              <div className=\"flex flex-col lg:flex-row gap-4\">\n                <div className=\"flex-1\">\n                  <Input\n                    placeholder=\"Rechercher par email, prénom ou nom...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    leftIcon={<Search />}\n                  />\n                </div>\n                <div className=\"flex gap-4\">\n                  <select\n                    value={roleFilter}\n                    onChange={(e) => setRoleFilter(e.target.value)}\n                    className=\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                  >\n                    <option value=\"\">Tous les rôles</option>\n                    <option value=\"admin\">Admin</option>\n                    <option value=\"professeur\">Professeur</option>\n                    <option value=\"etudiant\">Étudiant</option>\n                  </select>\n                  <select\n                    value={statusFilter}\n                    onChange={(e) => setStatusFilter(e.target.value)}\n                    className=\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                  >\n                    <option value=\"\">Tous les statuts</option>\n                    <option value=\"active\">Actif</option>\n                    <option value=\"inactive\">Inactif</option>\n                  </select>\n                </div>\n              </div>\n            </Card>\n          </motion.div>\n\n          {/* Bulk Actions */}\n          <AnimatePresence>\n            {selectedUsers.length > 0 && (\n              <motion.div\n                initial={{ opacity: 0, y: -20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"bg-primary-50 border border-primary-200 rounded-lg p-4\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-primary-700 font-medium\">\n                    {selectedUsers.length} utilisateur(s) sélectionné(s)\n                  </span>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => handleBulkUpdate({ isActive: true })}\n                    >\n                      Activer\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => handleBulkUpdate({ isActive: false })}\n                    >\n                      Désactiver\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => setSelectedUsers([])}\n                    >\n                      Annuler\n                    </Button>\n                  </div>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* Users Table */}\n          <motion.div variants={itemVariants}>\n            <Card>\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-secondary-200\">\n                  <thead className=\"bg-secondary-50\">\n                    <tr>\n                      <th className=\"px-2 py-2 text-left w-8\">\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedUsers.length === users.length && users.length > 0}\n                          onChange={selectAllUsers}\n                          className=\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"\n                        />\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-2/5\">\n                        Utilisateur\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\">\n                        Rôle\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-1/5\">\n                        Filière\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-16\">\n                        Statut\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\">\n                        Créé le\n                      </th>\n                      <th className=\"px-3 py-2 text-right text-xs font-medium text-secondary-500 uppercase tracking-wider w-24\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-secondary-200\">\n                    <AnimatePresence>\n                      {Array.isArray(users) && users.length > 0 ? (\n                        users.map((user, index) => (\n                          <motion.tr\n                            key={user.id}\n                            initial={{ opacity: 0, x: -20 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            exit={{ opacity: 0, x: 20 }}\n                            transition={{ delay: index * 0.05 }}\n                            className=\"hover:bg-secondary-50\"\n                          >\n                            <td className=\"px-2 py-2 whitespace-nowrap\">\n                              <input\n                                type=\"checkbox\"\n                                checked={selectedUsers.includes(user.id)}\n                                onChange={() => toggleUserSelection(user.id)}\n                                className=\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"\n                              />\n                            </td>\n                            <td className=\"px-3 py-2 whitespace-nowrap\">\n                              <div className=\"flex items-center\">\n                                <div className=\"h-6 w-6 bg-primary-100 rounded-full flex items-center justify-center mr-2\">\n                                  <span className=\"text-primary-600 font-medium text-xs\">\n                                    {user.prenom.charAt(0)}{user.nom.charAt(0)}\n                                  </span>\n                                </div>\n                                <div className=\"min-w-0 flex-1\">\n                                  <div className=\"text-xs font-medium text-secondary-900 truncate\">\n                                    {user.prenom} {user.nom}\n                                  </div>\n                                  <div className=\"text-xs text-secondary-500 truncate\">{user.email}</div>\n                                </div>\n                              </div>\n                            </td>\n                            <td className=\"px-3 py-2 whitespace-nowrap\">\n                              <span className={`inline-flex px-1 py-0.5 text-xs font-semibold rounded ${getRoleColor(user.role)}`}>\n                                {user.role}\n                              </span>\n                            </td>\n                            <td className=\"px-3 py-2 whitespace-nowrap text-xs text-secondary-900\">\n                              <div className=\"truncate\">{user.filiere?.nom || '-'}</div>\n                            </td>\n                            <td className=\"px-3 py-2 whitespace-nowrap\">\n                              <span className={`inline-flex px-1 py-0.5 text-xs font-semibold rounded ${getStatusColor(user.isActive)}`}>\n                                <span className=\"hidden sm:inline\">{user.isActive ? 'Actif' : 'Inactif'}</span>\n                                <span className=\"sm:hidden\">{user.isActive ? 'OK' : 'KO'}</span>\n                              </span>\n                            </td>\n                            <td className=\"px-3 py-2 whitespace-nowrap text-xs text-secondary-500\">\n                              {new Date(user.createdAt).toLocaleDateString('fr-FR', { \n                                day: '2-digit', \n                                month: '2-digit', \n                                year: '2-digit' \n                              })}\n                            </td>\n                            <td className=\"px-3 py-2 whitespace-nowrap text-right\">\n                              <div className=\"flex items-center justify-end gap-1\">\n                                <div title=\"Modifier\">\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    onClick={() => {\n                                      setEditingUser(user);\n                                      setShowEditModal(true);\n                                    }}\n                                    className=\"p-1 h-6 w-6\"\n                                  >\n                                    <Edit className=\"h-3 w-3\" />\n                                  </Button>\n                                </div>\n                                <div title={user.isActive ? 'Désactiver' : 'Activer'}>\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    onClick={() => handleToggleStatus(user.id)}\n                                    className={`p-1 h-6 w-6 ${user.isActive ? 'text-red-600 hover:text-red-700' : 'text-green-600 hover:text-green-700'}`}\n                                  >\n                                    {user.isActive ? <UserX className=\"h-3 w-3\" /> : <UserCheck className=\"h-3 w-3\" />}\n                                  </Button>\n                                </div>\n                                <div title=\"Supprimer\">\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    onClick={() => {\n                                      setDeletingUser(user);\n                                      setShowDeleteModal(true);\n                                    }}\n                                    className=\"p-1 h-6 w-6 text-red-600 hover:text-red-700\"\n                                  >\n                                    <Trash2 className=\"h-3 w-3\" />\n                                  </Button>\n                                </div>\n                              </div>\n                            </td>\n                          </motion.tr>\n                        ))\n                      ) : (\n                        <tr>\n                          <td colSpan={7} className=\"px-6 py-12 text-center\">\n                            <div className=\"text-secondary-500\">\n                              <div>\n                                <Users className=\"h-12 w-12 mx-auto text-secondary-300 mb-4\" />\n                                <p className=\"text-lg font-medium text-secondary-900 mb-2\">Aucun utilisateur trouvé</p>\n                                <p className=\"text-secondary-500\">\n                                  {searchTerm || roleFilter || statusFilter \n                                    ? 'Aucun utilisateur ne correspond à vos critères de recherche.'\n                                    : 'Commencez par créer votre premier utilisateur.'\n                                  }\n                                </p>\n                              </div>\n                            </div>\n                          </td>\n                        </tr>\n                      )}\n                    </AnimatePresence>\n                  </tbody>\n                </table>\n              </div>\n\n              {/* Pagination */}\n              {totalPages > 1 && (\n                <div className=\"px-6 py-4 border-t border-secondary-200\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"text-sm text-secondary-700\">\n                      Page {currentPage} sur {totalPages}\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n                        disabled={currentPage === 1}\n                      >\n                        Précédent\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n                        disabled={currentPage === totalPages}\n                      >\n                        Suivant\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </Card>\n          </motion.div>\n\n          {/* Create User Modal */}\n          <Modal\n            isOpen={showCreateModal}\n            onClose={() => setShowCreateModal(false)}\n            title=\"Créer un nouvel utilisateur\"\n            size=\"lg\"\n          >\n            <UserForm\n              onSubmit={handleCreateUser}\n              onCancel={() => setShowCreateModal(false)}\n              niveaux={niveaux}\n              filieres={filieres}\n            />\n          </Modal>\n\n          {/* Edit User Modal */}\n          <Modal\n            isOpen={showEditModal}\n            onClose={() => {\n              setShowEditModal(false);\n              setEditingUser(null);\n            }}\n            title=\"Modifier l'utilisateur\"\n            size=\"lg\"\n          >\n            {editingUser && (\n              <UserForm\n                user={editingUser}\n                onSubmit={handleUpdateUser}\n                onCancel={() => {\n                  setShowEditModal(false);\n                  setEditingUser(null);\n                }}\n                niveaux={niveaux}\n                filieres={filieres}\n                isEditing\n              />\n            )}\n          </Modal>\n\n          {/* Delete Confirmation Modal */}\n          <Modal\n            isOpen={showDeleteModal}\n            onClose={() => {\n              setShowDeleteModal(false);\n              setDeletingUser(null);\n            }}\n            title=\"Confirmer la suppression\"\n          >\n            {deletingUser && (\n              <div className=\"space-y-4\">\n                <p className=\"text-secondary-600\">\n                  Êtes-vous sûr de vouloir supprimer l'utilisateur{' '}\n                  <strong>{deletingUser.prenom} {deletingUser.nom}</strong> ?\n                </p>\n                <p className=\"text-sm text-red-600\">\n                  Cette action est irréversible.\n                </p>\n                <div className=\"flex justify-end gap-3\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => {\n                      setShowDeleteModal(false);\n                      setDeletingUser(null);\n                    }}\n                  >\n                    Annuler\n                  </Button>\n                  <Button\n                    variant=\"danger\"\n                    onClick={handleDeleteUser}\n                  >\n                    Supprimer\n                  </Button>\n                </div>\n              </div>\n            )}\n          </Modal>\n        </>\n      )}\n    </motion.div>\n  );\n};\n\nexport default UserManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}