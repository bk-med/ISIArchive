{"ast":null,"code":"import _objectSpread from\"/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{X,Upload,FileText,AlertCircle,CheckCircle,Loader2,BookOpen,GraduationCap}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{documentsAPI,academicAPI}from'../../utils/api';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DocumentUploadModal=_ref=>{let{isOpen,onClose,onSuccess}=_ref;const{user}=useAuth();const[loading,setLoading]=useState(false);const[uploadType,setUploadType]=useState('document');const[niveaux,setNiveaux]=useState([]);const[filieres,setFilieres]=useState([]);const[semestres,setSemestres]=useState([]);const[matieres,setMatieres]=useState([]);const[professorMatieres,setProfessorMatieres]=useState([]);const[formData,setFormData]=useState({titre:'',description:'',categorie:'',matiereId:'',niveauId:'',filiereId:'',semestreId:'',// PFE specific fields\nanneeDiplome:new Date().getFullYear(),filiereDiplome:'',titreProjet:'',resume:'',motsCles:'',file:null});const[errors,setErrors]=useState({});const categories=[{value:'cours',label:'Cours'},{value:'td',label:'TD'},{value:'tp',label:'TP'},{value:'examen',label:'Examen'},{value:'correction',label:'Correction'}];const allowedFileTypes=['application/pdf','application/msword','application/vnd.openxmlformats-officedocument.wordprocessingml.document','application/vnd.ms-powerpoint','application/vnd.openxmlformats-officedocument.presentationml.presentation'];const maxFileSize=50*1024*1024;// 50MB\nuseEffect(()=>{if(isOpen){fetchNiveaux();if((user===null||user===void 0?void 0:user.role)==='professeur'){fetchProfessorMatieres();}}},[isOpen,user]);useEffect(()=>{if(formData.niveauId){fetchFilieres(formData.niveauId);const niveau=niveaux.find(n=>n.id===formData.niveauId);setSemestres((niveau===null||niveau===void 0?void 0:niveau.semestres)||[]);}},[formData.niveauId,niveaux]);useEffect(()=>{if(formData.filiereId&&formData.semestreId){fetchMatieres(formData.filiereId,formData.semestreId);}},[formData.filiereId,formData.semestreId]);const fetchNiveaux=async()=>{try{const response=await academicAPI.getNiveaux();setNiveaux(response.data);}catch(error){console.error('Error fetching niveaux:',error);}};const fetchFilieres=async niveauId=>{try{const response=await academicAPI.getFilieres({niveauId});setFilieres(response.data);}catch(error){console.error('Error fetching filieres:',error);}};const fetchMatieres=async(filiereId,semestreId)=>{try{const response=await academicAPI.getMatieres({filiereId,semestreId});setMatieres(response.data);}catch(error){console.error('Error fetching matieres:',error);}};const fetchProfessorMatieres=async()=>{try{if(user!==null&&user!==void 0&&user.id){const response=await academicAPI.getProfesseurMatieres(user.id);setProfessorMatieres(response.data);}}catch(error){console.error('Error fetching professor matieres:',error);}};const validateForm=()=>{const newErrors={};if(!formData.titre.trim()){newErrors.titre='Le titre est requis';}if(!formData.file){newErrors.file='Un fichier est requis';}else{if(!allowedFileTypes.includes(formData.file.type)){newErrors.file='Type de fichier non autorisé. Utilisez PDF, DOC, DOCX, PPT ou PPTX';}if(formData.file.size>maxFileSize){newErrors.file='Le fichier est trop volumineux (max 50MB)';}}if(uploadType==='document'){if(!formData.categorie){newErrors.categorie='La catégorie est requise';}if((user===null||user===void 0?void 0:user.role)==='professeur'){if(!formData.matiereId){newErrors.matiereId='La matière est requise';}}else{if(!formData.niveauId){newErrors.niveauId='Le niveau est requis';}if(!formData.filiereId){newErrors.filiereId='La filière est requise';}if(!formData.semestreId){newErrors.semestreId='Le semestre est requis';}if(!formData.matiereId){newErrors.matiereId='La matière est requise';}}}else{if(!formData.anneeDiplome||formData.anneeDiplome<2000||formData.anneeDiplome>new Date().getFullYear()){newErrors.anneeDiplome='Année de diplôme invalide';}if(!formData.filiereDiplome.trim()){newErrors.filiereDiplome='La filière de diplôme est requise';}if(!formData.titreProjet.trim()){newErrors.titreProjet='Le titre du projet est requis';}if(!formData.niveauId){newErrors.niveauId='Le niveau est requis';}if(!formData.filiereId){newErrors.filiereId='La filière est requise';}if(!formData.semestreId){newErrors.semestreId='Le semestre est requis';}}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);try{const formDataToSend=new FormData();// Common fields\nformDataToSend.append('document',formData.file);formDataToSend.append('titre',formData.titre);if(formData.description){formDataToSend.append('description',formData.description);}// Get niveau, filiere, semestre names for file organization\nconst niveau=niveaux.find(n=>n.id===formData.niveauId);const filiere=filieres.find(f=>f.id===formData.filiereId);const semestre=semestres.find(s=>s.id===formData.semestreId);formDataToSend.append('niveau',(niveau===null||niveau===void 0?void 0:niveau.nom)||'');formDataToSend.append('filiere',(filiere===null||filiere===void 0?void 0:filiere.nom)||'');formDataToSend.append('semestre',(semestre===null||semestre===void 0?void 0:semestre.nom)||'');if(uploadType==='document'){formDataToSend.append('categorie',formData.categorie);formDataToSend.append('matiereId',formData.matiereId);// Get matiere name for file organization\nconst matiere=(user===null||user===void 0?void 0:user.role)==='professeur'?professorMatieres.find(m=>m.id===formData.matiereId):matieres.find(m=>m.id===formData.matiereId);formDataToSend.append('matiere',(matiere===null||matiere===void 0?void 0:matiere.nom)||'');await documentsAPI.uploadDocument(formDataToSend);toast.success('Document téléchargé avec succès');}else{formDataToSend.append('anneeDiplome',formData.anneeDiplome.toString());formDataToSend.append('filiereDiplome',formData.filiereDiplome);formDataToSend.append('titreProjet',formData.titreProjet);if(formData.resume){formDataToSend.append('resume',formData.resume);}if(formData.motsCles){formDataToSend.append('motsCles',formData.motsCles);}await documentsAPI.uploadPFEDocument(formDataToSend);toast.success('Document PFE téléchargé avec succès');}onSuccess();resetForm();}catch(error){var _error$response,_error$response$data;console.error('Error uploading document:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Erreur lors du téléchargement');}finally{setLoading(false);}};const resetForm=()=>{setFormData({titre:'',description:'',categorie:'',matiereId:'',niveauId:'',filiereId:'',semestreId:'',anneeDiplome:new Date().getFullYear(),filiereDiplome:'',titreProjet:'',resume:'',motsCles:'',file:null});setErrors({});setUploadType('document');};const handleClose=()=>{resetForm();onClose();};const handleFileChange=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{file}));if(errors.file){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{file:''}));}}};const handleInputChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));if(errors[field]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:''}));}};const canUploadPFE=(user===null||user===void 0?void 0:user.role)==='admin';return/*#__PURE__*/_jsx(AnimatePresence,{children:isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\",onClick:handleClose}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.95,y:20},className:\"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-primary-100 rounded-lg\",children:/*#__PURE__*/_jsx(Upload,{className:\"w-6 h-6 text-primary-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"T\\xE9l\\xE9charger un document\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Ajoutez un nouveau document \\xE0 la biblioth\\xE8que\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClose,className:\"p-2 text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),canUploadPFE&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setUploadType('document'),className:\"flex-1 p-4 border-2 rounded-lg transition-colors \".concat(uploadType==='document'?'border-primary-500 bg-primary-50':'border-gray-200 hover:border-gray-300'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Document acad\\xE9mique\"})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setUploadType('pfe'),className:\"flex-1 p-4 border-2 rounded-lg transition-colors \".concat(uploadType==='pfe'?'border-primary-500 bg-primary-50':'border-gray-200 hover:border-gray-300'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(GraduationCap,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Document PFE\"})]})})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Fichier *\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-center\",children:[/*#__PURE__*/_jsx(FileText,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"T\\xE9l\\xE9charger un fichier\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"sr-only\",accept:\".pdf,.doc,.docx,.ppt,.pptx\",onChange:handleFileChange})]}),/*#__PURE__*/_jsx(\"p\",{className:\"pl-1\",children:\"ou glisser-d\\xE9poser\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PDF, DOC, DOCX, PPT, PPTX jusqu'\\xE0 50MB\"}),formData.file&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-600 mt-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"inline w-4 h-4 mr-1\"}),formData.file.name]})]})}),errors.file&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-red-600 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.file]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Titre *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.titre,onChange:e=>handleInputChange('titre',e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",placeholder:\"Titre du document\"}),errors.titre&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.titre})]}),uploadType==='document'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Cat\\xE9gorie *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.categorie,onChange:e=>handleInputChange('categorie',e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner une cat\\xE9gorie\"}),categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.value,children:cat.label},cat.value))]}),errors.categorie&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.categorie})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>handleInputChange('description',e.target.value),rows:3,className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",placeholder:\"Description du document (optionnel)\"})]}),uploadType==='pfe'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Ann\\xE9e de dipl\\xF4me *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.anneeDiplome,onChange:e=>handleInputChange('anneeDiplome',parseInt(e.target.value)),min:\"2000\",max:new Date().getFullYear(),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"}),errors.anneeDiplome&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.anneeDiplome})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Fili\\xE8re de dipl\\xF4me *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.filiereDiplome,onChange:e=>handleInputChange('filiereDiplome',e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",placeholder:\"Ex: Informatique et R\\xE9seaux\"}),errors.filiereDiplome&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.filiereDiplome})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Titre du projet *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.titreProjet,onChange:e=>handleInputChange('titreProjet',e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",placeholder:\"Titre du projet de fin d'\\xE9tudes\"}),errors.titreProjet&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.titreProjet})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"R\\xE9sum\\xE9\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.resume,onChange:e=>handleInputChange('resume',e.target.value),rows:4,className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",placeholder:\"R\\xE9sum\\xE9 du projet (optionnel)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Mots-cl\\xE9s\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.motsCles,onChange:e=>handleInputChange('motsCles',e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",placeholder:\"Mots-cl\\xE9s s\\xE9par\\xE9s par des virgules\"})]})]}),(user===null||user===void 0?void 0:user.role)==='admin'||uploadType==='pfe'?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900\",children:\"Organisation acad\\xE9mique *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Niveau *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.niveauId,onChange:e=>handleInputChange('niveauId',e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner un niveau\"}),niveaux.map(niveau=>/*#__PURE__*/_jsx(\"option\",{value:niveau.id,children:niveau.nom},niveau.id))]}),errors.niveauId&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.niveauId})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Fili\\xE8re *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.filiereId,onChange:e=>handleInputChange('filiereId',e.target.value),disabled:!formData.niveauId,className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner une fili\\xE8re\"}),filieres.map(filiere=>/*#__PURE__*/_jsx(\"option\",{value:filiere.id,children:filiere.nom},filiere.id))]}),errors.filiereId&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.filiereId})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Semestre *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.semestreId,onChange:e=>handleInputChange('semestreId',e.target.value),disabled:!formData.niveauId,className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner un semestre\"}),semestres.map(semestre=>/*#__PURE__*/_jsx(\"option\",{value:semestre.id,children:semestre.nom},semestre.id))]}),errors.semestreId&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.semestreId})]})]}),uploadType==='document'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Mati\\xE8re *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.matiereId,onChange:e=>handleInputChange('matiereId',e.target.value),disabled:!formData.filiereId||!formData.semestreId,className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner une mati\\xE8re\"}),matieres.map(matiere=>/*#__PURE__*/_jsxs(\"option\",{value:matiere.id,children:[matiere.nom,\" (\",matiere.code,\")\"]},matiere.id))]}),errors.matiereId&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.matiereId})]})]}):(user===null||user===void 0?void 0:user.role)==='professeur'&&uploadType==='document'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Mati\\xE8re *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.matiereId,onChange:e=>handleInputChange('matiereId',e.target.value),className:\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner une mati\\xE8re\"}),professorMatieres.map(matiere=>/*#__PURE__*/_jsxs(\"option\",{value:matiere.id,children:[matiere.nom,\" (\",matiere.code,\")\"]},matiere.id))]}),errors.matiereId&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.matiereId})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleClose,className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 mr-2 animate-spin\"}),\"T\\xE9l\\xE9chargement...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4 mr-2\"}),\"T\\xE9l\\xE9charger\"]})})]})]})]})]})})});};export default DocumentUploadModal;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","X","Upload","FileText","AlertCircle","CheckCircle","Loader2","BookOpen","GraduationCap","useAuth","documentsAPI","academicAPI","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DocumentUploadModal","_ref","isOpen","onClose","onSuccess","user","loading","setLoading","uploadType","setUploadType","niveaux","setNiveaux","filieres","setFilieres","semestres","setSemestres","matieres","setMatieres","professorMatieres","setProfessorMatieres","formData","setFormData","titre","description","categorie","matiereId","niveauId","filiereId","semestreId","anneeDiplome","Date","getFullYear","filiereDiplome","titreProjet","resume","motsCles","file","errors","setErrors","categories","value","label","allowedFileTypes","maxFileSize","fetchNiveaux","role","fetchProfessorMatieres","fetchFilieres","niveau","find","n","id","fetchMatieres","response","getNiveaux","data","error","console","getFilieres","getMatieres","getProfesseurMatieres","validateForm","newErrors","trim","includes","type","size","Object","keys","length","handleSubmit","e","preventDefault","formDataToSend","FormData","append","filiere","f","semestre","s","nom","matiere","m","uploadDocument","success","toString","uploadPFEDocument","resetForm","_error$response","_error$response$data","message","handleClose","handleFileChange","_e$target$files","target","files","prev","_objectSpread","handleInputChange","field","canUploadPFE","children","className","div","initial","opacity","animate","exit","onClick","scale","y","concat","onSubmit","accept","onChange","name","placeholder","map","cat","rows","parseInt","min","max","disabled","code"],"sources":["/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/src/components/forms/DocumentUploadModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Upload,\n  FileText,\n  AlertCircle,\n  CheckCircle,\n  Loader2,\n  BookOpen,\n  GraduationCap\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { documentsAPI, academicAPI } from '../../utils/api';\nimport { CreateDocumentData, CreatePFEDocumentData, Matiere, Filiere, Niveau, Semestre } from '../../types';\nimport toast from 'react-hot-toast';\n\ninterface DocumentUploadModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nconst DocumentUploadModal: React.FC<DocumentUploadModalProps> = ({\n  isOpen,\n  onClose,\n  onSuccess\n}) => {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [uploadType, setUploadType] = useState<'document' | 'pfe'>('document');\n  const [niveaux, setNiveaux] = useState<Niveau[]>([]);\n  const [filieres, setFilieres] = useState<Filiere[]>([]);\n  const [semestres, setSemestres] = useState<Semestre[]>([]);\n  const [matieres, setMatieres] = useState<Matiere[]>([]);\n  const [professorMatieres, setProfessorMatieres] = useState<Matiere[]>([]);\n\n  const [formData, setFormData] = useState({\n    titre: '',\n    description: '',\n    categorie: '',\n    matiereId: '',\n    niveauId: '',\n    filiereId: '',\n    semestreId: '',\n    // PFE specific fields\n    anneeDiplome: new Date().getFullYear(),\n    filiereDiplome: '',\n    titreProjet: '',\n    resume: '',\n    motsCles: '',\n    file: null as File | null\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const categories = [\n    { value: 'cours', label: 'Cours' },\n    { value: 'td', label: 'TD' },\n    { value: 'tp', label: 'TP' },\n    { value: 'examen', label: 'Examen' },\n    { value: 'correction', label: 'Correction' }\n  ];\n\n  const allowedFileTypes = [\n    'application/pdf',\n    'application/msword',\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    'application/vnd.ms-powerpoint',\n    'application/vnd.openxmlformats-officedocument.presentationml.presentation'\n  ];\n\n  const maxFileSize = 50 * 1024 * 1024; // 50MB\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchNiveaux();\n      if (user?.role === 'professeur') {\n        fetchProfessorMatieres();\n      }\n    }\n  }, [isOpen, user]);\n\n  useEffect(() => {\n    if (formData.niveauId) {\n      fetchFilieres(formData.niveauId);\n      const niveau = niveaux.find(n => n.id === formData.niveauId);\n      setSemestres(niveau?.semestres || []);\n    }\n  }, [formData.niveauId, niveaux]);\n\n  useEffect(() => {\n    if (formData.filiereId && formData.semestreId) {\n      fetchMatieres(formData.filiereId, formData.semestreId);\n    }\n  }, [formData.filiereId, formData.semestreId]);\n\n  const fetchNiveaux = async () => {\n    try {\n      const response = await academicAPI.getNiveaux();\n      setNiveaux(response.data);\n    } catch (error) {\n      console.error('Error fetching niveaux:', error);\n    }\n  };\n\n  const fetchFilieres = async (niveauId: string) => {\n    try {\n      const response = await academicAPI.getFilieres({ niveauId });\n      setFilieres(response.data);\n    } catch (error) {\n      console.error('Error fetching filieres:', error);\n    }\n  };\n\n  const fetchMatieres = async (filiereId: string, semestreId: string) => {\n    try {\n      const response = await academicAPI.getMatieres({ filiereId, semestreId });\n      setMatieres(response.data);\n    } catch (error) {\n      console.error('Error fetching matieres:', error);\n    }\n  };\n\n  const fetchProfessorMatieres = async () => {\n    try {\n      if (user?.id) {\n        const response = await academicAPI.getProfesseurMatieres(user.id);\n        setProfessorMatieres(response.data);\n      }\n    } catch (error) {\n      console.error('Error fetching professor matieres:', error);\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.titre.trim()) {\n      newErrors.titre = 'Le titre est requis';\n    }\n\n    if (!formData.file) {\n      newErrors.file = 'Un fichier est requis';\n    } else {\n      if (!allowedFileTypes.includes(formData.file.type)) {\n        newErrors.file = 'Type de fichier non autorisé. Utilisez PDF, DOC, DOCX, PPT ou PPTX';\n      }\n      if (formData.file.size > maxFileSize) {\n        newErrors.file = 'Le fichier est trop volumineux (max 50MB)';\n      }\n    }\n\n    if (uploadType === 'document') {\n      if (!formData.categorie) {\n        newErrors.categorie = 'La catégorie est requise';\n      }\n      if (user?.role === 'professeur') {\n        if (!formData.matiereId) {\n          newErrors.matiereId = 'La matière est requise';\n        }\n      } else {\n        if (!formData.niveauId) {\n          newErrors.niveauId = 'Le niveau est requis';\n        }\n        if (!formData.filiereId) {\n          newErrors.filiereId = 'La filière est requise';\n        }\n        if (!formData.semestreId) {\n          newErrors.semestreId = 'Le semestre est requis';\n        }\n        if (!formData.matiereId) {\n          newErrors.matiereId = 'La matière est requise';\n        }\n      }\n    } else {\n      if (!formData.anneeDiplome || formData.anneeDiplome < 2000 || formData.anneeDiplome > new Date().getFullYear()) {\n        newErrors.anneeDiplome = 'Année de diplôme invalide';\n      }\n      if (!formData.filiereDiplome.trim()) {\n        newErrors.filiereDiplome = 'La filière de diplôme est requise';\n      }\n      if (!formData.titreProjet.trim()) {\n        newErrors.titreProjet = 'Le titre du projet est requis';\n      }\n      if (!formData.niveauId) {\n        newErrors.niveauId = 'Le niveau est requis';\n      }\n      if (!formData.filiereId) {\n        newErrors.filiereId = 'La filière est requise';\n      }\n      if (!formData.semestreId) {\n        newErrors.semestreId = 'Le semestre est requis';\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const formDataToSend = new FormData();\n      \n      // Common fields\n      formDataToSend.append('document', formData.file!);\n      formDataToSend.append('titre', formData.titre);\n      if (formData.description) {\n        formDataToSend.append('description', formData.description);\n      }\n\n      // Get niveau, filiere, semestre names for file organization\n      const niveau = niveaux.find(n => n.id === formData.niveauId);\n      const filiere = filieres.find(f => f.id === formData.filiereId);\n      const semestre = semestres.find(s => s.id === formData.semestreId);\n\n      formDataToSend.append('niveau', niveau?.nom || '');\n      formDataToSend.append('filiere', filiere?.nom || '');\n      formDataToSend.append('semestre', semestre?.nom || '');\n\n      if (uploadType === 'document') {\n        formDataToSend.append('categorie', formData.categorie);\n        formDataToSend.append('matiereId', formData.matiereId);\n        \n        // Get matiere name for file organization\n        const matiere = user?.role === 'professeur' \n          ? professorMatieres.find(m => m.id === formData.matiereId)\n          : matieres.find(m => m.id === formData.matiereId);\n        formDataToSend.append('matiere', matiere?.nom || '');\n\n        await documentsAPI.uploadDocument(formDataToSend);\n        toast.success('Document téléchargé avec succès');\n      } else {\n        formDataToSend.append('anneeDiplome', formData.anneeDiplome.toString());\n        formDataToSend.append('filiereDiplome', formData.filiereDiplome);\n        formDataToSend.append('titreProjet', formData.titreProjet);\n        if (formData.resume) {\n          formDataToSend.append('resume', formData.resume);\n        }\n        if (formData.motsCles) {\n          formDataToSend.append('motsCles', formData.motsCles);\n        }\n\n        await documentsAPI.uploadPFEDocument(formDataToSend);\n        toast.success('Document PFE téléchargé avec succès');\n      }\n\n      onSuccess();\n      resetForm();\n    } catch (error: any) {\n      console.error('Error uploading document:', error);\n      toast.error(error.response?.data?.message || 'Erreur lors du téléchargement');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      titre: '',\n      description: '',\n      categorie: '',\n      matiereId: '',\n      niveauId: '',\n      filiereId: '',\n      semestreId: '',\n      anneeDiplome: new Date().getFullYear(),\n      filiereDiplome: '',\n      titreProjet: '',\n      resume: '',\n      motsCles: '',\n      file: null\n    });\n    setErrors({});\n    setUploadType('document');\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setFormData(prev => ({ ...prev, file }));\n      if (errors.file) {\n        setErrors(prev => ({ ...prev, file: '' }));\n      }\n    }\n  };\n\n  const handleInputChange = (field: string, value: string | number) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  const canUploadPFE = user?.role === 'admin';\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n          <div className=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\"\n              onClick={handleClose}\n            />\n\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95, y: 20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.95, y: 20 }}\n              className=\"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg\"\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"p-2 bg-primary-100 rounded-lg\">\n                    <Upload className=\"w-6 h-6 text-primary-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900\">\n                      Télécharger un document\n                    </h3>\n                    <p className=\"text-sm text-gray-500\">\n                      Ajoutez un nouveau document à la bibliothèque\n                    </p>\n                  </div>\n                </div>\n                <button\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </div>\n\n              {/* Upload Type Selection */}\n              {canUploadPFE && (\n                <div className=\"mb-6\">\n                  <div className=\"flex space-x-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setUploadType('document')}\n                      className={`flex-1 p-4 border-2 rounded-lg transition-colors ${\n                        uploadType === 'document'\n                          ? 'border-primary-500 bg-primary-50'\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <div className=\"flex items-center justify-center space-x-2\">\n                        <BookOpen className=\"w-5 h-5\" />\n                        <span className=\"font-medium\">Document académique</span>\n                      </div>\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setUploadType('pfe')}\n                      className={`flex-1 p-4 border-2 rounded-lg transition-colors ${\n                        uploadType === 'pfe'\n                          ? 'border-primary-500 bg-primary-50'\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <div className=\"flex items-center justify-center space-x-2\">\n                        <GraduationCap className=\"w-5 h-5\" />\n                        <span className=\"font-medium\">Document PFE</span>\n                      </div>\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              <form onSubmit={handleSubmit} className=\"space-y-6\">\n                {/* File Upload */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Fichier *\n                  </label>\n                  <div className=\"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\">\n                    <div className=\"space-y-1 text-center\">\n                      <FileText className=\"mx-auto h-12 w-12 text-gray-400\" />\n                      <div className=\"flex text-sm text-gray-600\">\n                        <label className=\"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500\">\n                          <span>Télécharger un fichier</span>\n                          <input\n                            type=\"file\"\n                            className=\"sr-only\"\n                            accept=\".pdf,.doc,.docx,.ppt,.pptx\"\n                            onChange={handleFileChange}\n                          />\n                        </label>\n                        <p className=\"pl-1\">ou glisser-déposer</p>\n                      </div>\n                      <p className=\"text-xs text-gray-500\">\n                        PDF, DOC, DOCX, PPT, PPTX jusqu'à 50MB\n                      </p>\n                      {formData.file && (\n                        <p className=\"text-sm text-green-600 mt-2\">\n                          <CheckCircle className=\"inline w-4 h-4 mr-1\" />\n                          {formData.file.name}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                  {errors.file && (\n                    <p className=\"mt-1 text-sm text-red-600 flex items-center\">\n                      <AlertCircle className=\"w-4 h-4 mr-1\" />\n                      {errors.file}\n                    </p>\n                  )}\n                </div>\n\n                {/* Basic Information */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Titre *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={formData.titre}\n                      onChange={(e) => handleInputChange('titre', e.target.value)}\n                      className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                      placeholder=\"Titre du document\"\n                    />\n                    {errors.titre && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.titre}</p>\n                    )}\n                  </div>\n\n                  {uploadType === 'document' && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Catégorie *\n                      </label>\n                      <select\n                        value={formData.categorie}\n                        onChange={(e) => handleInputChange('categorie', e.target.value)}\n                        className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                      >\n                        <option value=\"\">Sélectionner une catégorie</option>\n                        {categories.map(cat => (\n                          <option key={cat.value} value={cat.value}>{cat.label}</option>\n                        ))}\n                      </select>\n                      {errors.categorie && (\n                        <p className=\"mt-1 text-sm text-red-600\">{errors.categorie}</p>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Description\n                  </label>\n                  <textarea\n                    value={formData.description}\n                    onChange={(e) => handleInputChange('description', e.target.value)}\n                    rows={3}\n                    className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                    placeholder=\"Description du document (optionnel)\"\n                  />\n                </div>\n\n                {/* PFE Specific Fields */}\n                {uploadType === 'pfe' && (\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Année de diplôme *\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={formData.anneeDiplome}\n                          onChange={(e) => handleInputChange('anneeDiplome', parseInt(e.target.value))}\n                          min=\"2000\"\n                          max={new Date().getFullYear()}\n                          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                        />\n                        {errors.anneeDiplome && (\n                          <p className=\"mt-1 text-sm text-red-600\">{errors.anneeDiplome}</p>\n                        )}\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Filière de diplôme *\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formData.filiereDiplome}\n                          onChange={(e) => handleInputChange('filiereDiplome', e.target.value)}\n                          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                          placeholder=\"Ex: Informatique et Réseaux\"\n                        />\n                        {errors.filiereDiplome && (\n                          <p className=\"mt-1 text-sm text-red-600\">{errors.filiereDiplome}</p>\n                        )}\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Titre du projet *\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={formData.titreProjet}\n                        onChange={(e) => handleInputChange('titreProjet', e.target.value)}\n                        className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                        placeholder=\"Titre du projet de fin d'études\"\n                      />\n                      {errors.titreProjet && (\n                        <p className=\"mt-1 text-sm text-red-600\">{errors.titreProjet}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Résumé\n                      </label>\n                      <textarea\n                        value={formData.resume}\n                        onChange={(e) => handleInputChange('resume', e.target.value)}\n                        rows={4}\n                        className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                        placeholder=\"Résumé du projet (optionnel)\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Mots-clés\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={formData.motsCles}\n                        onChange={(e) => handleInputChange('motsCles', e.target.value)}\n                        className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                        placeholder=\"Mots-clés séparés par des virgules\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n                {/* Academic Structure Selection */}\n                {user?.role === 'admin' || uploadType === 'pfe' ? (\n                  <div className=\"space-y-4\">\n                    <h4 className=\"text-sm font-medium text-gray-900\">\n                      Organisation académique *\n                    </h4>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Niveau *\n                        </label>\n                        <select\n                          value={formData.niveauId}\n                          onChange={(e) => handleInputChange('niveauId', e.target.value)}\n                          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                        >\n                          <option value=\"\">Sélectionner un niveau</option>\n                          {niveaux.map(niveau => (\n                            <option key={niveau.id} value={niveau.id}>{niveau.nom}</option>\n                          ))}\n                        </select>\n                        {errors.niveauId && (\n                          <p className=\"mt-1 text-sm text-red-600\">{errors.niveauId}</p>\n                        )}\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Filière *\n                        </label>\n                        <select\n                          value={formData.filiereId}\n                          onChange={(e) => handleInputChange('filiereId', e.target.value)}\n                          disabled={!formData.niveauId}\n                          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:bg-gray-100\"\n                        >\n                          <option value=\"\">Sélectionner une filière</option>\n                          {filieres.map(filiere => (\n                            <option key={filiere.id} value={filiere.id}>{filiere.nom}</option>\n                          ))}\n                        </select>\n                        {errors.filiereId && (\n                          <p className=\"mt-1 text-sm text-red-600\">{errors.filiereId}</p>\n                        )}\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Semestre *\n                        </label>\n                        <select\n                          value={formData.semestreId}\n                          onChange={(e) => handleInputChange('semestreId', e.target.value)}\n                          disabled={!formData.niveauId}\n                          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:bg-gray-100\"\n                        >\n                          <option value=\"\">Sélectionner un semestre</option>\n                          {semestres.map(semestre => (\n                            <option key={semestre.id} value={semestre.id}>{semestre.nom}</option>\n                          ))}\n                        </select>\n                        {errors.semestreId && (\n                          <p className=\"mt-1 text-sm text-red-600\">{errors.semestreId}</p>\n                        )}\n                      </div>\n                    </div>\n\n                    {uploadType === 'document' && (\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Matière *\n                        </label>\n                        <select\n                          value={formData.matiereId}\n                          onChange={(e) => handleInputChange('matiereId', e.target.value)}\n                          disabled={!formData.filiereId || !formData.semestreId}\n                          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:bg-gray-100\"\n                        >\n                          <option value=\"\">Sélectionner une matière</option>\n                          {matieres.map(matiere => (\n                            <option key={matiere.id} value={matiere.id}>\n                              {matiere.nom} ({matiere.code})\n                            </option>\n                          ))}\n                        </select>\n                        {errors.matiereId && (\n                          <p className=\"mt-1 text-sm text-red-600\">{errors.matiereId}</p>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                ) : user?.role === 'professeur' && uploadType === 'document' ? (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Matière *\n                    </label>\n                    <select\n                      value={formData.matiereId}\n                      onChange={(e) => handleInputChange('matiereId', e.target.value)}\n                      className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                    >\n                      <option value=\"\">Sélectionner une matière</option>\n                      {professorMatieres.map(matiere => (\n                        <option key={matiere.id} value={matiere.id}>\n                          {matiere.nom} ({matiere.code})\n                        </option>\n                      ))}\n                    </select>\n                    {errors.matiereId && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.matiereId}</p>\n                    )}\n                  </div>\n                ) : null}\n\n                {/* Actions */}\n                <div className=\"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200\">\n                  <button\n                    type=\"button\"\n                    onClick={handleClose}\n                    className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {loading ? (\n                      <>\n                        <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                        Téléchargement...\n                      </>\n                    ) : (\n                      <>\n                        <Upload className=\"w-4 h-4 mr-2\" />\n                        Télécharger\n                      </>\n                    )}\n                  </button>\n                </div>\n              </form>\n            </motion.div>\n          </div>\n        </div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default DocumentUploadModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}