{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{motion}from'framer-motion';import{ArrowLeft,Download,FileText,Calendar,User,BookOpen,GraduationCap,Star,FileIcon,CheckCircle,Loader2,Plus}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{documentsAPI}from'../../utils/api';import toast from'react-hot-toast';import{CorrectionUploadModal}from'../../components/forms/CorrectionUploadModal';import CommentSection from'../../components/ui/CommentSection';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DocumentDetails=()=>{const{id}=useParams();const navigate=useNavigate();const{user}=useAuth();const[document,setDocument]=useState(null);const[loading,setLoading]=useState(true);const[showCorrectionModal,setShowCorrectionModal]=useState(false);useEffect(()=>{if(id){fetchDocument();}},[id]);const fetchDocument=async()=>{try{setLoading(true);const response=await documentsAPI.getDocumentById(id);setDocument(response.data);}catch(error){console.error('Error fetching document:',error);toast.error('Erreur lors du chargement du document');navigate('/documents');}finally{setLoading(false);}};const handleDownload=async doc=>{try{const blob=await documentsAPI.downloadDocument(doc.id);const url=window.URL.createObjectURL(blob);const link=window.document.createElement('a');link.href=url;link.download=doc.nomFichier;window.document.body.appendChild(link);link.click();window.document.body.removeChild(link);window.URL.revokeObjectURL(url);toast.success('Document téléchargé avec succès');}catch(error){console.error('Error downloading document:',error);toast.error('Erreur lors du téléchargement');}};const handleCorrectionUploadSuccess=()=>{setShowCorrectionModal(false);fetchDocument();// Refresh document data\ntoast.success('Correction ajoutée avec succès');};const canAddCorrection=doc=>{// Only professors and admins can add corrections\nif((user===null||user===void 0?void 0:user.role)!=='professeur'&&(user===null||user===void 0?void 0:user.role)!=='admin')return false;// Can't add correction to PFE documents or documents that already have corrections\nif(doc.categorie==='pfe'||doc.correction||doc.correctionId)return false;return true;};const formatFileSize=bytes=>{const size=parseInt(bytes);if(size===0)return'0 B';const k=1024;const sizes=['B','KB','MB','GB'];const i=Math.floor(Math.log(size)/Math.log(k));return parseFloat((size/Math.pow(k,i)).toFixed(2))+' '+sizes[i];};const getCategoryIcon=categorie=>{switch(categorie){case'cours':return BookOpen;case'td':return FileText;case'tp':return FileIcon;case'examen':return Calendar;case'correction':return Star;case'pfe':return GraduationCap;default:return FileText;}};const getCategoryColor=categorie=>{switch(categorie){case'cours':return'bg-blue-100 text-blue-800 border-blue-200';case'td':return'bg-green-100 text-green-800 border-green-200';case'tp':return'bg-purple-100 text-purple-800 border-purple-200';case'examen':return'bg-red-100 text-red-800 border-red-200';case'correction':return'bg-yellow-100 text-yellow-800 border-yellow-200';case'pfe':return'bg-indigo-100 text-indigo-800 border-indigo-200';default:return'bg-gray-100 text-gray-800 border-gray-200';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-6 h-6 animate-spin text-primary-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Chargement du document...\"})]})});}if(!document){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"Document non trouv\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Le document demand\\xE9 n'existe pas ou vous n'avez pas les permissions pour y acc\\xE9der.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/documents'),className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4 mr-2\"}),\"Retour aux documents\"]})]})});}const CategoryIcon=getCategoryIcon(document.categorie);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/documents'),className:\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4 mr-1\"}),\"Retour aux documents\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-white rounded-lg shadow-sm border\",children:/*#__PURE__*/_jsx(CategoryIcon,{className:\"w-8 h-8 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:document.titre}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border \".concat(getCategoryColor(document.categorie)),children:document.categorie.toUpperCase()}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"Ajout\\xE9 le \",new Date(document.createdAt).toLocaleDateString('fr-FR')]})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-4\",children:\"Informations du document\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[document.description&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:document.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Auteur\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-gray-400\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[document.uploader.prenom,\" \",document.uploader.nom]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Taille du fichier\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:formatFileSize(document.tailleFichier)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Type de fichier\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:document.typeMime})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Date d'ajout\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:new Date(document.createdAt).toLocaleDateString('fr-FR',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'})})]})]}),document.matiere&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Mati\\xE8re\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[document.matiere.nom,\" (\",document.matiere.code,\")\"]})]}),document.pfeData&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-3\",children:\"Informations PFE\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Titre du projet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:document.pfeData.titreProjet})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Ann\\xE9e de dipl\\xF4me\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:document.pfeData.anneeDiplome})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Fili\\xE8re de dipl\\xF4me\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:document.pfeData.filiereDiplome})]})]}),document.pfeData.resume&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"R\\xE9sum\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:document.pfeData.resume})]}),document.pfeData.motsCles.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Mots-cl\\xE9s\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:document.pfeData.motsCles.map((tag,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\",children:tag},index))})]})]})]})]})]}),document.correction&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.1},className:\"bg-blue-50 rounded-lg border border-blue-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-4\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-blue-900\",children:\"Correction disponible\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-900 mb-1\",children:\"Titre\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-800\",children:document.correction.titre})]}),document.correction.description&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-900 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-800\",children:document.correction.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-900 mb-1\",children:\"Taille\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-800\",children:formatFileSize(document.correction.tailleFichier)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-900 mb-1\",children:\"Ajout\\xE9e le\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-800\",children:new Date(document.correction.createdAt).toLocaleDateString('fr-FR')})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDownload(document.correction),className:\"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-md hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4 mr-2\"}),\"T\\xE9l\\xE9charger la correction\"]})]})]}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.2},className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsx(CommentSection,{documentId:document.id})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Actions rapides\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDownload(document),className:\"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4 mr-2\"}),\"T\\xE9l\\xE9charger le document\"]}),document.correction&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDownload(document.correction),className:\"w-full inline-flex items-center justify-center px-4 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4 mr-2\"}),\"T\\xE9l\\xE9charger la correction\"]}),canAddCorrection(document)&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCorrectionModal(true),className:\"w-full inline-flex items-center justify-center px-4 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-2\"}),\"Ajouter une correction\"]})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:0.1},className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Statistiques\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"T\\xE9l\\xE9chargements\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Commentaires\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Vues\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"-\"})]})]})]})]})]})]}),showCorrectionModal&&document&&/*#__PURE__*/_jsx(CorrectionUploadModal,{isOpen:showCorrectionModal,onClose:()=>setShowCorrectionModal(false),parentDocumentId:document.id,parentDocumentTitle:document.titre,onSuccess:handleCorrectionUploadSuccess})]});};export default DocumentDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","motion","ArrowLeft","Download","FileText","Calendar","User","BookOpen","GraduationCap","Star","FileIcon","CheckCircle","Loader2","Plus","useAuth","documentsAPI","toast","CorrectionUploadModal","CommentSection","jsx","_jsx","jsxs","_jsxs","DocumentDetails","id","navigate","user","document","setDocument","loading","setLoading","showCorrectionModal","setShowCorrectionModal","fetchDocument","response","getDocumentById","data","error","console","handleDownload","doc","blob","downloadDocument","url","window","URL","createObjectURL","link","createElement","href","download","nomFichier","body","appendChild","click","removeChild","revokeObjectURL","success","handleCorrectionUploadSuccess","canAddCorrection","role","categorie","correction","correctionId","formatFileSize","bytes","size","parseInt","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getCategoryIcon","getCategoryColor","className","children","onClick","CategoryIcon","titre","concat","toUpperCase","Date","createdAt","toLocaleDateString","div","initial","opacity","y","animate","description","uploader","prenom","nom","tailleFichier","typeMime","year","month","day","hour","minute","matiere","code","pfeData","titreProjet","anneeDiplome","filiereDiplome","resume","motsCles","length","map","tag","index","transition","delay","documentId","x","isOpen","onClose","parentDocumentId","parentDocumentTitle","onSuccess"],"sources":["/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/src/pages/dashboard/DocumentDetails.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport {\n  ArrowLeft,\n  Download,\n  FileText,\n  Calendar,\n  User,\n  BookOpen,\n  GraduationCap,\n  Star,\n  FileIcon,\n  CheckCircle,\n  FileCheck,\n  MessageCircle,\n  Loader2,\n  Upload,\n  Plus\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { documentsAPI } from '../../utils/api';\nimport { Document } from '../../types';\nimport toast from 'react-hot-toast';\nimport { CorrectionUploadModal } from '../../components/forms/CorrectionUploadModal';\nimport CommentSection from '../../components/ui/CommentSection';\n\nconst DocumentDetails: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [document, setDocument] = useState<Document | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [showCorrectionModal, setShowCorrectionModal] = useState(false);\n\n  useEffect(() => {\n    if (id) {\n      fetchDocument();\n    }\n  }, [id]);\n\n  const fetchDocument = async () => {\n    try {\n      setLoading(true);\n      const response = await documentsAPI.getDocumentById(id!);\n      setDocument(response.data);\n    } catch (error) {\n      console.error('Error fetching document:', error);\n      toast.error('Erreur lors du chargement du document');\n      navigate('/documents');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownload = async (doc: Document) => {\n    try {\n      const blob = await documentsAPI.downloadDocument(doc.id);\n      const url = window.URL.createObjectURL(blob);\n      const link = window.document.createElement('a');\n      link.href = url;\n      link.download = doc.nomFichier;\n      window.document.body.appendChild(link);\n      link.click();\n      window.document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      toast.success('Document téléchargé avec succès');\n    } catch (error) {\n      console.error('Error downloading document:', error);\n      toast.error('Erreur lors du téléchargement');\n    }\n  };\n\n  const handleCorrectionUploadSuccess = () => {\n    setShowCorrectionModal(false);\n    fetchDocument(); // Refresh document data\n    toast.success('Correction ajoutée avec succès');\n  };\n\n  const canAddCorrection = (doc: Document) => {\n    // Only professors and admins can add corrections\n    if (user?.role !== 'professeur' && user?.role !== 'admin') return false;\n    \n    // Can't add correction to PFE documents or documents that already have corrections\n    if (doc.categorie === 'pfe' || doc.correction || doc.correctionId) return false;\n    \n    return true;\n  };\n\n  const formatFileSize = (bytes: string) => {\n    const size = parseInt(bytes);\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getCategoryIcon = (categorie: string) => {\n    switch (categorie) {\n      case 'cours': return BookOpen;\n      case 'td': return FileText;\n      case 'tp': return FileIcon;\n      case 'examen': return Calendar;\n      case 'correction': return Star;\n      case 'pfe': return GraduationCap;\n      default: return FileText;\n    }\n  };\n\n  const getCategoryColor = (categorie: string) => {\n    switch (categorie) {\n      case 'cours': return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'td': return 'bg-green-100 text-green-800 border-green-200';\n      case 'tp': return 'bg-purple-100 text-purple-800 border-purple-200';\n      case 'examen': return 'bg-red-100 text-red-800 border-red-200';\n      case 'correction': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      case 'pfe': return 'bg-indigo-100 text-indigo-800 border-indigo-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"flex items-center space-x-2\">\n          <Loader2 className=\"w-6 h-6 animate-spin text-primary-600\" />\n          <span className=\"text-gray-600\">Chargement du document...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!document) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Document non trouvé</h2>\n          <p className=\"text-gray-600 mb-4\">Le document demandé n'existe pas ou vous n'avez pas les permissions pour y accéder.</p>\n          <button\n            onClick={() => navigate('/documents')}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Retour aux documents\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const CategoryIcon = getCategoryIcon(document.categorie);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <button\n            onClick={() => navigate('/documents')}\n            className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-1\" />\n            Retour aux documents\n          </button>\n          \n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"p-3 bg-white rounded-lg shadow-sm border\">\n                <CategoryIcon className=\"w-8 h-8 text-gray-600\" />\n              </div>\n              <div>\n                <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{document.titre}</h1>\n                <div className=\"flex items-center space-x-4\">\n                  <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${getCategoryColor(document.categorie)}`}>\n                    {document.categorie.toUpperCase()}\n                  </span>\n                  <span className=\"text-sm text-gray-500\">\n                    Ajouté le {new Date(document.createdAt).toLocaleDateString('fr-FR')}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-2 space-y-8\">\n            {/* Document Information */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"bg-white rounded-lg shadow-sm border p-6\"\n            >\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Informations du document</h2>\n              \n              <div className=\"space-y-4\">\n                {document.description && (\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Description</h3>\n                    <p className=\"text-gray-600\">{document.description}</p>\n                  </div>\n                )}\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Auteur</h3>\n                    <div className=\"flex items-center space-x-2\">\n                      <User className=\"w-4 h-4 text-gray-400\" />\n                      <span className=\"text-gray-600\">\n                        {document.uploader.prenom} {document.uploader.nom}\n                      </span>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Taille du fichier</h3>\n                    <span className=\"text-gray-600\">{formatFileSize(document.tailleFichier)}</span>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Type de fichier</h3>\n                    <span className=\"text-gray-600\">{document.typeMime}</span>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Date d'ajout</h3>\n                    <span className=\"text-gray-600\">\n                      {new Date(document.createdAt).toLocaleDateString('fr-FR', {\n                        year: 'numeric',\n                        month: 'long',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </span>\n                  </div>\n                </div>\n\n                {document.matiere && (\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Matière</h3>\n                    <span className=\"text-gray-600\">\n                      {document.matiere.nom} ({document.matiere.code})\n                    </span>\n                  </div>\n                )}\n\n                {/* PFE Information */}\n                {document.pfeData && (\n                  <div className=\"border-t pt-4\">\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-3\">Informations PFE</h3>\n                    <div className=\"space-y-3\">\n                      <div>\n                        <h4 className=\"text-sm font-medium text-gray-700 mb-1\">Titre du projet</h4>\n                        <p className=\"text-gray-600\">{document.pfeData.titreProjet}</p>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <div>\n                          <h4 className=\"text-sm font-medium text-gray-700 mb-1\">Année de diplôme</h4>\n                          <span className=\"text-gray-600\">{document.pfeData.anneeDiplome}</span>\n                        </div>\n                        <div>\n                          <h4 className=\"text-sm font-medium text-gray-700 mb-1\">Filière de diplôme</h4>\n                          <span className=\"text-gray-600\">{document.pfeData.filiereDiplome}</span>\n                        </div>\n                      </div>\n                      \n                      {document.pfeData.resume && (\n                        <div>\n                          <h4 className=\"text-sm font-medium text-gray-700 mb-1\">Résumé</h4>\n                          <p className=\"text-gray-600\">{document.pfeData.resume}</p>\n                        </div>\n                      )}\n                      \n                      {document.pfeData.motsCles.length > 0 && (\n                        <div>\n                          <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Mots-clés</h4>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {document.pfeData.motsCles.map((tag, index) => (\n                              <span\n                                key={index}\n                                className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\"\n                              >\n                                {tag}\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n\n            {/* Correction Information */}\n            {document.correction && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.1 }}\n                className=\"bg-blue-50 rounded-lg border border-blue-200 p-6\"\n              >\n                <div className=\"flex items-center space-x-2 mb-4\">\n                  <CheckCircle className=\"w-5 h-5 text-blue-600\" />\n                  <h2 className=\"text-xl font-semibold text-blue-900\">Correction disponible</h2>\n                </div>\n                \n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"text-sm font-medium text-blue-900 mb-1\">Titre</h3>\n                    <p className=\"text-blue-800\">{document.correction.titre}</p>\n                  </div>\n                  \n                  {document.correction.description && (\n                    <div>\n                      <h3 className=\"text-sm font-medium text-blue-900 mb-1\">Description</h3>\n                      <p className=\"text-blue-800\">{document.correction.description}</p>\n                    </div>\n                  )}\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <h3 className=\"text-sm font-medium text-blue-900 mb-1\">Taille</h3>\n                      <span className=\"text-blue-800\">{formatFileSize(document.correction.tailleFichier)}</span>\n                    </div>\n                    <div>\n                      <h3 className=\"text-sm font-medium text-blue-900 mb-1\">Ajoutée le</h3>\n                      <span className=\"text-blue-800\">\n                        {new Date(document.correction.createdAt).toLocaleDateString('fr-FR')}\n                      </span>\n                    </div>\n                  </div>\n                  \n                  <button\n                    onClick={() => handleDownload(document.correction!)}\n                    className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-md hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                  >\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    Télécharger la correction\n                  </button>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Comments Section */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n              className=\"bg-white rounded-lg shadow-sm border p-6\"\n            >\n              <CommentSection documentId={document.id} />\n            </motion.div>\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Quick Actions */}\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"bg-white rounded-lg shadow-sm border p-6\"\n            >\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Actions rapides</h3>\n              <div className=\"space-y-3\">\n                <button\n                  onClick={() => handleDownload(document)}\n                  className=\"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\"\n                >\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Télécharger le document\n                </button>\n                \n                {document.correction && (\n                  <button\n                    onClick={() => handleDownload(document.correction!)}\n                    className=\"w-full inline-flex items-center justify-center px-4 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100\"\n                  >\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    Télécharger la correction\n                  </button>\n                )}\n                \n                {canAddCorrection(document) && (\n                  <button\n                    onClick={() => setShowCorrectionModal(true)}\n                    className=\"w-full inline-flex items-center justify-center px-4 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100\"\n                  >\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Ajouter une correction\n                  </button>\n                )}\n              </div>\n            </motion.div>\n\n            {/* Document Stats */}\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.1 }}\n              className=\"bg-white rounded-lg shadow-sm border p-6\"\n            >\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Statistiques</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Téléchargements</span>\n                  <span className=\"text-sm font-medium text-gray-900\">-</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Commentaires</span>\n                  <span className=\"text-sm font-medium text-gray-900\">-</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Vues</span>\n                  <span className=\"text-sm font-medium text-gray-900\">-</span>\n                </div>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </div>\n\n      {/* Correction Upload Modal */}\n      {showCorrectionModal && document && (\n        <CorrectionUploadModal\n          isOpen={showCorrectionModal}\n          onClose={() => setShowCorrectionModal(false)}\n          parentDocumentId={document.id}\n          parentDocumentTitle={document.titre}\n          onSuccess={handleCorrectionUploadSuccess}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default DocumentDetails; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}