{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Users,Plus,Search,Edit,Trash2,UserCheck,UserX}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{usersAPI,academicAPI}from'../../utils/api';import Card from'../../components/ui/Card';import Button from'../../components/ui/Button';import Input from'../../components/ui/Input';import Modal from'../../components/ui/Modal';import UserForm from'../../components/forms/UserForm';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const{user:currentUser}=useAuth();const[users,setUsers]=useState([]);const[stats,setStats]=useState(null);const[niveaux,setNiveaux]=useState([]);const[filieres,setFilieres]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[roleFilter,setRoleFilter]=useState('');const[statusFilter,setStatusFilter]=useState('');const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[selectedUsers,setSelectedUsers]=useState([]);const[showCreateModal,setShowCreateModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[editingUser,setEditingUser]=useState(null);const[showDeleteModal,setShowDeleteModal]=useState(false);const[deletingUser,setDeletingUser]=useState(null);const itemsPerPage=10;// Animation variants matching Dashboard\nconst containerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:0.1,delayChildren:0.2}}};const itemVariants={hidden:{opacity:0,y:20,scale:0.95},visible:{opacity:1,y:0,scale:1,transition:{duration:0.5,ease:[0.25,0.46,0.45,0.94]}}};const cardVariants={hidden:{opacity:0,y:30,scale:0.9},visible:{opacity:1,y:0,scale:1,transition:{duration:0.6,ease:[0.25,0.46,0.45,0.94]}},hover:{y:-8,scale:1.02,transition:{duration:0.3,ease:'easeOut'}}};useEffect(()=>{fetchUsers();fetchStats();fetchAcademicData();},[currentPage,searchTerm,roleFilter,statusFilter]);const fetchUsers=async()=>{try{var _response$data$pagina;setLoading(true);const response=await usersAPI.getUsers({page:currentPage,limit:itemsPerPage,search:searchTerm||undefined,role:roleFilter||undefined,isActive:statusFilter?statusFilter==='active':undefined});// The backend returns { data: { users: [...], pagination: {...} } }\nconst usersData=Array.isArray(response.data.users)?response.data.users:[];setUsers(usersData);setTotalPages(((_response$data$pagina=response.data.pagination)===null||_response$data$pagina===void 0?void 0:_response$data$pagina.totalPages)||1);}catch(error){console.error('Error fetching users:',error);toast.error('Erreur lors du chargement des utilisateurs');setUsers([]);// Set empty array on error\n}finally{setLoading(false);}};const fetchStats=async()=>{try{const response=await usersAPI.getUserStats();setStats(response.data.stats);}catch(error){console.error('Error fetching stats:',error);setStats(null);// Reset stats on error\n}};const fetchAcademicData=async()=>{try{const[niveauxRes,filieresRes]=await Promise.all([academicAPI.getNiveaux(),academicAPI.getFilieres()]);setNiveaux(Array.isArray(niveauxRes.data)?niveauxRes.data:[]);setFilieres(Array.isArray(filieresRes.data)?filieresRes.data:[]);}catch(error){console.error('Error fetching academic data:',error);setNiveaux([]);setFilieres([]);}};const handleCreateUser=async userData=>{try{await usersAPI.createUser(userData);toast.success('Utilisateur créé avec succès');setShowCreateModal(false);fetchUsers();fetchStats();}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Erreur lors de la création');}};const handleUpdateUser=async userData=>{if(!editingUser)return;try{await usersAPI.updateUser(editingUser.id,userData);toast.success('Utilisateur mis à jour avec succès');setShowEditModal(false);setEditingUser(null);fetchUsers();fetchStats();}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Erreur lors de la mise à jour');}};const handleDeleteUser=async()=>{if(!deletingUser)return;try{await usersAPI.deleteUser(deletingUser.id);toast.success('Utilisateur supprimé avec succès');setShowDeleteModal(false);setDeletingUser(null);fetchUsers();fetchStats();}catch(error){var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Erreur lors de la suppression');}};const handleToggleStatus=async userId=>{try{await usersAPI.toggleUserStatus(userId);toast.success('Statut modifié avec succès');fetchUsers();fetchStats();}catch(error){var _error$response4,_error$response4$data;toast.error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Erreur lors de la modification');}};const handleBulkUpdate=async updateData=>{if(selectedUsers.length===0)return;try{await usersAPI.bulkUpdateUsers({userIds:selectedUsers,updateData});toast.success(\"\".concat(selectedUsers.length,\" utilisateur(s) mis \\xE0 jour\"));setSelectedUsers([]);fetchUsers();fetchStats();}catch(error){var _error$response5,_error$response5$data;toast.error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Erreur lors de la mise à jour');}};const toggleUserSelection=userId=>{setSelectedUsers(prev=>prev.includes(userId)?prev.filter(id=>id!==userId):[...prev,userId]);};const selectAllUsers=()=>{if(!Array.isArray(users))return;// Safety check\nif(selectedUsers.length===users.length){setSelectedUsers([]);}else{setSelectedUsers(users.map(user=>user.id));}};const getRoleColor=role=>{switch(role){case'admin':return'bg-red-100 text-red-800';case'professeur':return'bg-blue-100 text-blue-800';case'etudiant':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};const getStatusColor=isActive=>{return isActive?'bg-green-100 text-green-800':'bg-red-100 text-red-800';};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"flex flex-col items-center space-y-4\",initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(motion.div,{className:\"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full\",animate:{rotate:360},transition:{duration:1,repeat:Infinity,ease:'linear'}}),/*#__PURE__*/_jsx(motion.p,{className:\"text-secondary-600 font-medium\",animate:{opacity:[0.5,1,0.5]},transition:{duration:1.5,repeat:Infinity},children:\"Chargement des utilisateurs...\"})]})});}return/*#__PURE__*/_jsxs(motion.div,{variants:containerVariants,initial:\"hidden\",animate:\"visible\",className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(motion.div,{variants:itemVariants,className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(motion.h1,{className:\"text-2xl font-bold text-secondary-900\",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:0.3,duration:0.6},children:\"Gestion des Utilisateurs\"}),/*#__PURE__*/_jsx(motion.p,{className:\"text-secondary-600\",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:0.4,duration:0.6},children:\"G\\xE9rez les comptes utilisateurs de la plateforme\"})]}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:0.5,duration:0.6},children:/*#__PURE__*/_jsx(Button,{onClick:()=>setShowCreateModal(true),leftIcon:/*#__PURE__*/_jsx(Plus,{}),className:\"bg-primary-600 hover:bg-primary-700\",children:\"Nouvel Utilisateur\"})})]}),stats&&/*#__PURE__*/_jsxs(motion.div,{variants:itemVariants,className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(motion.div,{variants:cardVariants,whileHover:\"hover\",children:/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-blue-100\",children:/*#__PURE__*/_jsx(Users,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Total\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.totalUsers})]})]})})}),/*#__PURE__*/_jsx(motion.div,{variants:cardVariants,whileHover:\"hover\",children:/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-green-100\",children:/*#__PURE__*/_jsx(UserCheck,{className:\"h-6 w-6 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Actifs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.activeUsers})]})]})})}),/*#__PURE__*/_jsx(motion.div,{variants:cardVariants,whileHover:\"hover\",children:/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-red-100\",children:/*#__PURE__*/_jsx(UserX,{className:\"h-6 w-6 text-red-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Inactifs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.inactiveUsers})]})]})})}),/*#__PURE__*/_jsx(motion.div,{variants:cardVariants,whileHover:\"hover\",children:/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-purple-100\",children:/*#__PURE__*/_jsx(Users,{className:\"h-6 w-6 text-purple-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-secondary-600\",children:\"Professeurs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-secondary-900\",children:stats.roleDistribution.professeur})]})]})})})]}),/*#__PURE__*/_jsx(motion.div,{variants:itemVariants,children:/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"Rechercher par email, pr\\xE9nom ou nom...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),leftIcon:/*#__PURE__*/_jsx(Search,{})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:roleFilter,onChange:e=>setRoleFilter(e.target.value),className:\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les r\\xF4les\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"professeur\",children:\"Professeur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"etudiant\",children:\"\\xC9tudiant\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les statuts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Actif\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactif\"})]})]})]})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:selectedUsers.length>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"bg-primary-50 border border-primary-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary-700 font-medium\",children:[selectedUsers.length,\" utilisateur(s) s\\xE9lectionn\\xE9(s)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>handleBulkUpdate({isActive:true}),children:\"Activer\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>handleBulkUpdate({isActive:false}),children:\"D\\xE9sactiver\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>setSelectedUsers([]),children:\"Annuler\"})]})]})})}),/*#__PURE__*/_jsx(motion.div,{variants:itemVariants,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-secondary-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-secondary-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 text-left w-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUsers.length===users.length&&users.length>0,onChange:selectAllUsers,className:\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-2/5\",children:\"Utilisateur\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\",children:\"R\\xF4le\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-1/5\",children:\"Fili\\xE8re\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-16\",children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\",children:\"Cr\\xE9\\xE9 le\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-xs font-medium text-secondary-500 uppercase tracking-wider w-24\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-secondary-200\",children:/*#__PURE__*/_jsx(AnimatePresence,{children:Array.isArray(users)&&users.length>0?users.map((user,index)=>{var _user$filiere;return/*#__PURE__*/_jsxs(motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:index*0.05},className:\"hover:bg-secondary-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUsers.includes(user.id),onChange:()=>toggleUserSelection(user.id),className:\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 w-6 bg-primary-100 rounded-full flex items-center justify-center mr-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-white font-medium text-xs\",children:[(user.prenom||'').charAt(0),(user.nom||'').charAt(0)]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-medium text-secondary-900 truncate\",children:[user.prenom,\" \",user.nom]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-secondary-500 truncate\",children:user.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-1 py-0.5 text-xs font-semibold rounded \".concat(getRoleColor(user.role)),children:user.role})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-xs text-secondary-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"truncate\",children:((_user$filiere=user.filiere)===null||_user$filiere===void 0?void 0:_user$filiere.nom)||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex px-1 py-0.5 text-xs font-semibold rounded \".concat(getStatusColor(user.isActive)),children:[/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:user.isActive?'Actif':'Inactif'}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:user.isActive?'OK':'KO'})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-xs text-secondary-500\",children:new Date(user.createdAt).toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',year:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{title:\"Modifier\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:()=>{setEditingUser(user);setShowEditModal(true);},className:\"p-1 h-6 w-6\",children:/*#__PURE__*/_jsx(Edit,{className:\"h-3 w-3\"})})}),/*#__PURE__*/_jsx(\"div\",{title:user.isActive?'Désactiver':'Activer',children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:()=>handleToggleStatus(user.id),className:\"p-1 h-6 w-6 \".concat(user.isActive?'text-red-600 hover:text-red-700':'text-green-600 hover:text-green-700'),children:user.isActive?/*#__PURE__*/_jsx(UserX,{className:\"h-3 w-3\"}):/*#__PURE__*/_jsx(UserCheck,{className:\"h-3 w-3\"})})}),/*#__PURE__*/_jsx(\"div\",{title:\"Supprimer\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:()=>{setDeletingUser(user);setShowDeleteModal(true);},className:\"p-1 h-6 w-6 text-red-600 hover:text-red-700\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-3 w-3\"})})})]})})]},user.id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:7,className:\"px-6 py-12 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-secondary-500\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Users,{className:\"h-12 w-12 mx-auto text-secondary-300 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium text-secondary-900 mb-2\",children:\"Aucun utilisateur trouv\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-secondary-500\",children:searchTerm||roleFilter||statusFilter?'Aucun utilisateur ne correspond à vos critères de recherche.':'Commencez par créer votre premier utilisateur.'})]})})})})})})]})}),totalPages>1&&/*#__PURE__*/_jsx(motion.div,{className:\"px-6 py-4 border-t border-secondary-200\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.3,duration:0.5},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-secondary-700\",children:[\"Page \",currentPage,\" sur \",totalPages]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>setCurrentPage(prev=>Math.max(1,prev-1)),disabled:currentPage===1,children:\"Pr\\xE9c\\xE9dent\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>setCurrentPage(prev=>Math.min(totalPages,prev+1)),disabled:currentPage===totalPages,children:\"Suivant\"})]})]})})]})}),/*#__PURE__*/_jsx(Modal,{isOpen:showCreateModal,onClose:()=>setShowCreateModal(false),title:\"Cr\\xE9er un nouvel utilisateur\",size:\"lg\",children:/*#__PURE__*/_jsx(UserForm,{onSubmit:handleCreateUser,onCancel:()=>setShowCreateModal(false),niveaux:niveaux,filieres:filieres})}),/*#__PURE__*/_jsx(Modal,{isOpen:showEditModal,onClose:()=>{setShowEditModal(false);setEditingUser(null);},title:\"Modifier l'utilisateur\",size:\"lg\",children:editingUser&&/*#__PURE__*/_jsx(UserForm,{user:editingUser,onSubmit:handleUpdateUser,onCancel:()=>{setShowEditModal(false);setEditingUser(null);},niveaux:niveaux,filieres:filieres,isEditing:true})}),/*#__PURE__*/_jsx(Modal,{isOpen:showDeleteModal,onClose:()=>{setShowDeleteModal(false);setDeletingUser(null);},title:\"Confirmer la suppression\",children:deletingUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-secondary-600\",children:[\"\\xCAtes-vous s\\xFBr de vouloir supprimer l'utilisateur\",' ',/*#__PURE__*/_jsxs(\"strong\",{children:[deletingUser.prenom,\" \",deletingUser.nom]}),\" ?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:\"Cette action est irr\\xE9versible.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>{setShowDeleteModal(false);setDeletingUser(null);},children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleDeleteUser,children:\"Supprimer\"})]})]})})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","Users","Plus","Search","Edit","Trash2","UserCheck","UserX","useAuth","usersAPI","academicAPI","Card","Button","Input","Modal","UserForm","toast","jsx","_jsx","jsxs","_jsxs","UserManagement","user","currentUser","users","setUsers","stats","setStats","niveaux","setNiveaux","filieres","setFilieres","loading","setLoading","searchTerm","setSearchTerm","roleFilter","setRoleFilter","statusFilter","setStatusFilter","currentPage","setCurrentPage","totalPages","setTotalPages","selectedUsers","setSelectedUsers","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","editingUser","setEditingUser","showDeleteModal","setShowDeleteModal","deletingUser","setDeletingUser","itemsPerPage","containerVariants","hidden","opacity","visible","transition","staggerChildren","delayChildren","itemVariants","y","scale","duration","ease","cardVariants","hover","fetchUsers","fetchStats","fetchAcademicData","_response$data$pagina","response","getUsers","page","limit","search","undefined","role","isActive","usersData","Array","isArray","data","pagination","error","console","getUserStats","niveauxRes","filieresRes","Promise","all","getNiveaux","getFilieres","handleCreateUser","userData","createUser","success","_error$response","_error$response$data","message","handleUpdateUser","updateUser","id","_error$response2","_error$response2$data","handleDeleteUser","deleteUser","_error$response3","_error$response3$data","handleToggleStatus","userId","toggleUserStatus","_error$response4","_error$response4$data","handleBulkUpdate","updateData","length","bulkUpdateUsers","userIds","concat","_error$response5","_error$response5$data","toggleUserSelection","prev","includes","filter","selectAllUsers","map","getRoleColor","getStatusColor","className","children","div","initial","animate","rotate","repeat","Infinity","p","variants","h1","x","delay","onClick","leftIcon","whileHover","totalUsers","activeUsers","inactiveUsers","roleDistribution","professeur","placeholder","value","onChange","e","target","exit","size","variant","type","checked","index","_user$filiere","tr","prenom","charAt","nom","email","filiere","Date","createdAt","toLocaleDateString","day","month","year","title","colSpan","Math","max","disabled","min","isOpen","onClose","onSubmit","onCancel","isEditing"],"sources":["/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/src/pages/admin/UserManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Users,\n  Plus,\n  Search,\n  Filter,\n  Edit,\n  Trash2,\n  MoreVertical,\n  UserCheck,\n  UserX,\n  Eye,\n  Download,\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { usersAPI, academicAPI } from '../../utils/api';\nimport { User, CreateUserData, UpdateUserData, Niveau, Filiere } from '../../types';\nimport Card from '../../components/ui/Card';\nimport Button from '../../components/ui/Button';\nimport Input from '../../components/ui/Input';\nimport Modal from '../../components/ui/Modal';\nimport UserForm from '../../components/forms/UserForm';\nimport toast from 'react-hot-toast';\n\ninterface UserStats {\n  totalUsers: number;\n  activeUsers: number;\n  inactiveUsers: number;\n  roleDistribution: {\n    admin: number;\n    professeur: number;\n    etudiant: number;\n  };\n}\n\nconst UserManagement: React.FC = () => {\n  const { user: currentUser } = useAuth();\n  const [users, setUsers] = useState<User[]>([]);\n  const [stats, setStats] = useState<UserStats | null>(null);\n  const [niveaux, setNiveaux] = useState<Niveau[]>([]);\n  const [filieres, setFilieres] = useState<Filiere[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [roleFilter, setRoleFilter] = useState<string>('');\n  const [statusFilter, setStatusFilter] = useState<string>('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [selectedUsers, setSelectedUsers] = useState<string[]>([]);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingUser, setEditingUser] = useState<User | null>(null);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deletingUser, setDeletingUser] = useState<User | null>(null);\n\n  const itemsPerPage = 10;\n\n  // Animation variants matching Dashboard\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.1,\n        delayChildren: 0.2,\n      },\n    },\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 20, scale: 0.95 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      scale: 1,\n      transition: {\n        duration: 0.5,\n        ease: [0.25, 0.46, 0.45, 0.94],\n      },\n    },\n  };\n\n  const cardVariants = {\n    hidden: { opacity: 0, y: 30, scale: 0.9 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      scale: 1,\n      transition: {\n        duration: 0.6,\n        ease: [0.25, 0.46, 0.45, 0.94],\n      },\n    },\n    hover: {\n      y: -8,\n      scale: 1.02,\n      transition: {\n        duration: 0.3,\n        ease: 'easeOut',\n      },\n    },\n  };\n\n  useEffect(() => {\n    fetchUsers();\n    fetchStats();\n    fetchAcademicData();\n  }, [currentPage, searchTerm, roleFilter, statusFilter]);\n\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      const response = await usersAPI.getUsers({\n        page: currentPage,\n        limit: itemsPerPage,\n        search: searchTerm || undefined,\n        role: roleFilter || undefined,\n        isActive: statusFilter ? statusFilter === 'active' : undefined,\n      });\n      \n      // The backend returns { data: { users: [...], pagination: {...} } }\n      const usersData = Array.isArray(response.data.users) ? response.data.users : [];\n      setUsers(usersData);\n      setTotalPages(response.data.pagination?.totalPages || 1);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      toast.error('Erreur lors du chargement des utilisateurs');\n      setUsers([]); // Set empty array on error\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchStats = async () => {\n    try {\n      const response = await usersAPI.getUserStats();\n      setStats(response.data.stats);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n      setStats(null); // Reset stats on error\n    }\n  };\n\n  const fetchAcademicData = async () => {\n    try {\n      const [niveauxRes, filieresRes] = await Promise.all([\n        academicAPI.getNiveaux(),\n        academicAPI.getFilieres(),\n      ]);\n      setNiveaux(Array.isArray(niveauxRes.data) ? niveauxRes.data : []);\n      setFilieres(Array.isArray(filieresRes.data) ? filieresRes.data : []);\n    } catch (error) {\n      console.error('Error fetching academic data:', error);\n      setNiveaux([]);\n      setFilieres([]);\n    }\n  };\n\n  const handleCreateUser = async (userData: CreateUserData | UpdateUserData) => {\n    try {\n      await usersAPI.createUser(userData as CreateUserData);\n      toast.success('Utilisateur créé avec succès');\n      setShowCreateModal(false);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la création');\n    }\n  };\n\n  const handleUpdateUser = async (userData: CreateUserData | UpdateUserData) => {\n    if (!editingUser) return;\n    try {\n      await usersAPI.updateUser(editingUser.id, userData as UpdateUserData);\n      toast.success('Utilisateur mis à jour avec succès');\n      setShowEditModal(false);\n      setEditingUser(null);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la mise à jour');\n    }\n  };\n\n  const handleDeleteUser = async () => {\n    if (!deletingUser) return;\n    try {\n      await usersAPI.deleteUser(deletingUser.id);\n      toast.success('Utilisateur supprimé avec succès');\n      setShowDeleteModal(false);\n      setDeletingUser(null);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la suppression');\n    }\n  };\n\n  const handleToggleStatus = async (userId: string) => {\n    try {\n      await usersAPI.toggleUserStatus(userId);\n      toast.success('Statut modifié avec succès');\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la modification');\n    }\n  };\n\n  const handleBulkUpdate = async (updateData: Partial<UpdateUserData>) => {\n    if (selectedUsers.length === 0) return;\n    try {\n      await usersAPI.bulkUpdateUsers({\n        userIds: selectedUsers,\n        updateData,\n      });\n      toast.success(`${selectedUsers.length} utilisateur(s) mis à jour`);\n      setSelectedUsers([]);\n      fetchUsers();\n      fetchStats();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Erreur lors de la mise à jour');\n    }\n  };\n\n  const toggleUserSelection = (userId: string) => {\n    setSelectedUsers(prev =>\n      prev.includes(userId)\n        ? prev.filter(id => id !== userId)\n        : [...prev, userId]\n    );\n  };\n\n  const selectAllUsers = () => {\n    if (!Array.isArray(users)) return; // Safety check\n    \n    if (selectedUsers.length === users.length) {\n      setSelectedUsers([]);\n    } else {\n      setSelectedUsers(users.map(user => user.id));\n    }\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'admin':\n        return 'bg-red-100 text-red-800';\n      case 'professeur':\n        return 'bg-blue-100 text-blue-800';\n      case 'etudiant':\n        return 'bg-green-100 text-green-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusColor = (isActive: boolean) => {\n    return isActive\n      ? 'bg-green-100 text-green-800'\n      : 'bg-red-100 text-red-800';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <motion.div\n          className=\"flex flex-col items-center space-y-4\"\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.5 }}\n        >\n          <motion.div\n            className=\"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full\"\n            animate={{ rotate: 360 }}\n            transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n          />\n          <motion.p\n            className=\"text-secondary-600 font-medium\"\n            animate={{ opacity: [0.5, 1, 0.5] }}\n            transition={{ duration: 1.5, repeat: Infinity }}\n          >\n            Chargement des utilisateurs...\n          </motion.p>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      className=\"space-y-6\"\n    >\n      {/* Header */}\n      <motion.div \n        variants={itemVariants} \n        className=\"flex justify-between items-center\"\n      >\n        <div>\n          <motion.h1 \n            className=\"text-2xl font-bold text-secondary-900\"\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: 0.3, duration: 0.6 }}\n          >\n            Gestion des Utilisateurs\n          </motion.h1>\n          <motion.p \n            className=\"text-secondary-600\"\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: 0.4, duration: 0.6 }}\n          >\n            Gérez les comptes utilisateurs de la plateforme\n          </motion.p>\n        </div>\n        <motion.div\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ delay: 0.5, duration: 0.6 }}\n        >\n          <Button\n            onClick={() => setShowCreateModal(true)}\n            leftIcon={<Plus />}\n            className=\"bg-primary-600 hover:bg-primary-700\"\n          >\n            Nouvel Utilisateur\n          </Button>\n        </motion.div>\n      </motion.div>\n\n      {/* Stats Cards */}\n      {stats && (\n        <motion.div \n          variants={itemVariants} \n          className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\"\n        >\n          <motion.div variants={cardVariants} whileHover=\"hover\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-blue-100\">\n                  <Users className=\"h-6 w-6 text-blue-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-secondary-600\">Total</p>\n                  <p className=\"text-2xl font-bold text-secondary-900\">{stats.totalUsers}</p>\n                </div>\n              </div>\n            </Card>\n          </motion.div>\n          \n          <motion.div variants={cardVariants} whileHover=\"hover\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-green-100\">\n                  <UserCheck className=\"h-6 w-6 text-green-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-secondary-600\">Actifs</p>\n                  <p className=\"text-2xl font-bold text-secondary-900\">{stats.activeUsers}</p>\n                </div>\n              </div>\n            </Card>\n          </motion.div>\n          \n          <motion.div variants={cardVariants} whileHover=\"hover\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-red-100\">\n                  <UserX className=\"h-6 w-6 text-red-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-secondary-600\">Inactifs</p>\n                  <p className=\"text-2xl font-bold text-secondary-900\">{stats.inactiveUsers}</p>\n                </div>\n              </div>\n            </Card>\n          </motion.div>\n          \n          <motion.div variants={cardVariants} whileHover=\"hover\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-purple-100\">\n                  <Users className=\"h-6 w-6 text-purple-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-secondary-600\">Professeurs</p>\n                  <p className=\"text-2xl font-bold text-secondary-900\">{stats.roleDistribution.professeur}</p>\n                </div>\n              </div>\n            </Card>\n          </motion.div>\n        </motion.div>\n      )}\n\n      {/* Filters and Search */}\n      <motion.div variants={itemVariants}>\n        <Card className=\"p-6\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <Input\n                placeholder=\"Rechercher par email, prénom ou nom...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                leftIcon={<Search />}\n              />\n            </div>\n            <div className=\"flex gap-4\">\n              <select\n                value={roleFilter}\n                onChange={(e) => setRoleFilter(e.target.value)}\n                className=\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              >\n                <option value=\"\">Tous les rôles</option>\n                <option value=\"admin\">Admin</option>\n                <option value=\"professeur\">Professeur</option>\n                <option value=\"etudiant\">Étudiant</option>\n              </select>\n              <select\n                value={statusFilter}\n                onChange={(e) => setStatusFilter(e.target.value)}\n                className=\"px-3 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              >\n                <option value=\"\">Tous les statuts</option>\n                <option value=\"active\">Actif</option>\n                <option value=\"inactive\">Inactif</option>\n              </select>\n            </div>\n          </div>\n        </Card>\n      </motion.div>\n\n      {/* Bulk Actions */}\n      <AnimatePresence>\n        {selectedUsers.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"bg-primary-50 border border-primary-200 rounded-lg p-4\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-primary-700 font-medium\">\n                {selectedUsers.length} utilisateur(s) sélectionné(s)\n              </span>\n              <div className=\"flex gap-2\">\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => handleBulkUpdate({ isActive: true })}\n                >\n                  Activer\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => handleBulkUpdate({ isActive: false })}\n                >\n                  Désactiver\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => setSelectedUsers([])}\n                >\n                  Annuler\n                </Button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Users Table */}\n      <motion.div variants={itemVariants}>\n        <Card>\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-secondary-200\">\n              <thead className=\"bg-secondary-50\">\n                <tr>\n                  <th className=\"px-2 py-2 text-left w-8\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedUsers.length === users.length && users.length > 0}\n                      onChange={selectAllUsers}\n                      className=\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"\n                    />\n                  </th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-2/5\">\n                    Utilisateur\n                  </th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\">\n                    Rôle\n                  </th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-1/5\">\n                    Filière\n                  </th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-16\">\n                    Statut\n                  </th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider w-20\">\n                    Créé le\n                  </th>\n                  <th className=\"px-3 py-2 text-right text-xs font-medium text-secondary-500 uppercase tracking-wider w-24\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-secondary-200\">\n                <AnimatePresence>\n                  {Array.isArray(users) && users.length > 0 ? (\n                    users.map((user, index) => (\n                      <motion.tr\n                        key={user.id}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        exit={{ opacity: 0, x: 20 }}\n                        transition={{ delay: index * 0.05 }}\n                        className=\"hover:bg-secondary-50\"\n                      >\n                        <td className=\"px-2 py-2 whitespace-nowrap\">\n                          <input\n                            type=\"checkbox\"\n                            checked={selectedUsers.includes(user.id)}\n                            onChange={() => toggleUserSelection(user.id)}\n                            className=\"rounded border-secondary-300 text-primary-600 focus:ring-primary-500\"\n                          />\n                        </td>\n                        <td className=\"px-3 py-2 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <div className=\"h-6 w-6 bg-primary-100 rounded-full flex items-center justify-center mr-2\">\n                              <span className=\"text-white font-medium text-xs\">\n                                {(user.prenom || '').charAt(0)}{(user.nom || '').charAt(0)}\n                              </span>\n                            </div>\n                            <div className=\"min-w-0 flex-1\">\n                              <div className=\"text-xs font-medium text-secondary-900 truncate\">\n                                {user.prenom} {user.nom}\n                              </div>\n                              <div className=\"text-xs text-secondary-500 truncate\">{user.email}</div>\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-3 py-2 whitespace-nowrap\">\n                          <span className={`inline-flex px-1 py-0.5 text-xs font-semibold rounded ${getRoleColor(user.role)}`}>\n                            {user.role}\n                          </span>\n                        </td>\n                        <td className=\"px-3 py-2 whitespace-nowrap text-xs text-secondary-900\">\n                          <div className=\"truncate\">{user.filiere?.nom || '-'}</div>\n                        </td>\n                        <td className=\"px-3 py-2 whitespace-nowrap\">\n                          <span className={`inline-flex px-1 py-0.5 text-xs font-semibold rounded ${getStatusColor(user.isActive)}`}>\n                            <span className=\"hidden sm:inline\">{user.isActive ? 'Actif' : 'Inactif'}</span>\n                            <span className=\"sm:hidden\">{user.isActive ? 'OK' : 'KO'}</span>\n                          </span>\n                        </td>\n                        <td className=\"px-3 py-2 whitespace-nowrap text-xs text-secondary-500\">\n                          {new Date(user.createdAt).toLocaleDateString('fr-FR', { \n                            day: '2-digit', \n                            month: '2-digit', \n                            year: '2-digit' \n                          })}\n                        </td>\n                        <td className=\"px-3 py-2 whitespace-nowrap text-right\">\n                          <div className=\"flex items-center justify-end gap-1\">\n                            <div title=\"Modifier\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                onClick={() => {\n                                  setEditingUser(user);\n                                  setShowEditModal(true);\n                                }}\n                                className=\"p-1 h-6 w-6\"\n                              >\n                                <Edit className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                            <div title={user.isActive ? 'Désactiver' : 'Activer'}>\n                              <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                onClick={() => handleToggleStatus(user.id)}\n                                className={`p-1 h-6 w-6 ${user.isActive ? 'text-red-600 hover:text-red-700' : 'text-green-600 hover:text-green-700'}`}\n                              >\n                                {user.isActive ? <UserX className=\"h-3 w-3\" /> : <UserCheck className=\"h-3 w-3\" />}\n                              </Button>\n                            </div>\n                            <div title=\"Supprimer\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                onClick={() => {\n                                  setDeletingUser(user);\n                                  setShowDeleteModal(true);\n                                }}\n                                className=\"p-1 h-6 w-6 text-red-600 hover:text-red-700\"\n                              >\n                                <Trash2 className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          </div>\n                        </td>\n                      </motion.tr>\n                    ))\n                  ) : (\n                    <tr>\n                      <td colSpan={7} className=\"px-6 py-12 text-center\">\n                        <div className=\"text-secondary-500\">\n                          <div>\n                            <Users className=\"h-12 w-12 mx-auto text-secondary-300 mb-4\" />\n                            <p className=\"text-lg font-medium text-secondary-900 mb-2\">Aucun utilisateur trouvé</p>\n                            <p className=\"text-secondary-500\">\n                              {searchTerm || roleFilter || statusFilter \n                                ? 'Aucun utilisateur ne correspond à vos critères de recherche.'\n                                : 'Commencez par créer votre premier utilisateur.'\n                              }\n                            </p>\n                          </div>\n                        </div>\n                      </td>\n                    </tr>\n                  )}\n                </AnimatePresence>\n              </tbody>\n            </table>\n          </div>\n\n          {/* Pagination */}\n          {totalPages > 1 && (\n            <motion.div \n              className=\"px-6 py-4 border-t border-secondary-200\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3, duration: 0.5 }}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-sm text-secondary-700\">\n                  Page {currentPage} sur {totalPages}\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n                    disabled={currentPage === 1}\n                  >\n                    Précédent\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n                    disabled={currentPage === totalPages}\n                  >\n                    Suivant\n                  </Button>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </Card>\n      </motion.div>\n\n      {/* Create User Modal */}\n      <Modal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        title=\"Créer un nouvel utilisateur\"\n        size=\"lg\"\n      >\n        <UserForm\n          onSubmit={handleCreateUser}\n          onCancel={() => setShowCreateModal(false)}\n          niveaux={niveaux}\n          filieres={filieres}\n        />\n      </Modal>\n\n      {/* Edit User Modal */}\n      <Modal\n        isOpen={showEditModal}\n        onClose={() => {\n          setShowEditModal(false);\n          setEditingUser(null);\n        }}\n        title=\"Modifier l'utilisateur\"\n        size=\"lg\"\n      >\n        {editingUser && (\n          <UserForm\n            user={editingUser}\n            onSubmit={handleUpdateUser}\n            onCancel={() => {\n              setShowEditModal(false);\n              setEditingUser(null);\n            }}\n            niveaux={niveaux}\n            filieres={filieres}\n            isEditing\n          />\n        )}\n      </Modal>\n\n      {/* Delete Confirmation Modal */}\n      <Modal\n        isOpen={showDeleteModal}\n        onClose={() => {\n          setShowDeleteModal(false);\n          setDeletingUser(null);\n        }}\n        title=\"Confirmer la suppression\"\n      >\n        {deletingUser && (\n          <div className=\"space-y-4\">\n            <p className=\"text-secondary-600\">\n              Êtes-vous sûr de vouloir supprimer l'utilisateur{' '}\n              <strong>{deletingUser.prenom} {deletingUser.nom}</strong> ?\n            </p>\n            <p className=\"text-sm text-red-600\">\n              Cette action est irréversible.\n            </p>\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setShowDeleteModal(false);\n                  setDeletingUser(null);\n                }}\n              >\n                Annuler\n              </Button>\n              <Button\n                variant=\"danger\"\n                onClick={handleDeleteUser}\n              >\n                Supprimer\n              </Button>\n            </div>\n          </div>\n        )}\n      </Modal>\n    </motion.div>\n  );\n};\n\nexport default UserManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}