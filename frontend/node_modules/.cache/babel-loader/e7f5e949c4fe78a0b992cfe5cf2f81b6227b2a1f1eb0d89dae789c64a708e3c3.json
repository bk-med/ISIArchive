{"ast":null,"code":"import _objectSpread from\"/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{FileText,Download,Eye,Search,Upload,BookOpen,Calendar,User,Star,Grid,List,FileIcon,GraduationCap,CheckCircle,FileCheck,Trash2}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{documentsAPI,academicAPI}from'../../utils/api';import toast from'react-hot-toast';import DocumentUploadModal from'../../components/forms/DocumentUploadModal';import{CorrectionUploadModal}from'../../components/forms/CorrectionUploadModal';import Modal from'../../components/ui/Modal';import Button from'../../components/ui/Button';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Documents=()=>{var _user$niveau,_user$niveau2,_user$niveau3;const{user}=useAuth();const navigate=useNavigate();const[documents,setDocuments]=useState([]);const[matieres,setMatieres]=useState([]);const[loading,setLoading]=useState(true);const[uploading,setUploading]=useState(false);const[viewMode,setViewMode]=useState('grid');const[showUploadModal,setShowUploadModal]=useState(false);const[showCorrectionModal,setShowCorrectionModal]=useState(false);const[correctionParentDocument,setCorrectionParentDocument]=useState(null);const[showDeleteModal,setShowDeleteModal]=useState(false);const[deletingDocument,setDeletingDocument]=useState(null);const[pagination,setPagination]=useState({page:1,limit:20,total:0,pages:0});const[filters,setFilters]=useState({search:'',categorie:'',matiereId:'',page:1,limit:20});const categories=[{value:'',label:'Toutes les catégories'},{value:'cours',label:'Cours'},{value:'td',label:'TD'},{value:'tp',label:'TP'},{value:'examen',label:'Examens'},...((user===null||user===void 0?void 0:user.role)==='etudiant'&&((user===null||user===void 0?void 0:(_user$niveau=user.niveau)===null||_user$niveau===void 0?void 0:_user$niveau.nom)==='L3'||(user===null||user===void 0?void 0:(_user$niveau2=user.niveau)===null||_user$niveau2===void 0?void 0:_user$niveau2.nom)==='3ING'||(user===null||user===void 0?void 0:(_user$niveau3=user.niveau)===null||_user$niveau3===void 0?void 0:_user$niveau3.nom)==='M2')?[{value:'pfe',label:'PFE'}]:[])];// Animation variants matching Dashboard\nconst containerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:0.1,delayChildren:0.2}}};const itemVariants={hidden:{opacity:0,y:20,scale:0.95},visible:{opacity:1,y:0,scale:1,transition:{duration:0.5,ease:[0.25,0.46,0.45,0.94]}}};const cardVariants={hidden:{opacity:0,y:30,scale:0.9},visible:{opacity:1,y:0,scale:1,transition:{duration:0.6,ease:[0.25,0.46,0.45,0.94]}},hover:{y:-8,scale:1.02,transition:{duration:0.3,ease:'easeOut'}}};useEffect(()=>{fetchDocuments();fetchMatieres();},[filters]);const fetchDocuments=async()=>{try{setLoading(true);const response=await documentsAPI.getDocuments({page:filters.page,limit:filters.limit,search:filters.search||undefined,categorie:filters.categorie||undefined,matiereId:filters.matiereId||undefined});setDocuments(response.data);setPagination(response.pagination||{page:1,limit:20,total:0,pages:0});}catch(error){console.error('Error fetching documents:',error);toast.error('Erreur lors du chargement des documents');}finally{setLoading(false);}};const fetchMatieres=async()=>{try{const response=await academicAPI.getMatieres();setMatieres(response.data);}catch(error){console.error('Error fetching matieres:',error);}};const handleSearch=value=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{search:value,page:1}));};const handleFilterChange=(key,value)=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:value,page:1}));};const handleDownload=async doc=>{try{const blob=await documentsAPI.downloadDocument(doc.id);const url=window.URL.createObjectURL(blob);const link=window.document.createElement('a');link.href=url;link.download=doc.nomFichier;window.document.body.appendChild(link);link.click();window.document.body.removeChild(link);window.URL.revokeObjectURL(url);toast.success('Document téléchargé avec succès');}catch(error){console.error('Error downloading document:',error);toast.error('Erreur lors du téléchargement');}};const handleView=doc=>{navigate(\"/documents/\".concat(doc.id));};const handleAddCorrection=doc=>{setCorrectionParentDocument(doc);setShowCorrectionModal(true);};const handleDeleteDocument=async()=>{if(!deletingDocument)return;try{await documentsAPI.deleteDocument(deletingDocument.id);toast.success('Document supprimé avec succès');setShowDeleteModal(false);setDeletingDocument(null);fetchDocuments();// Refresh the list\n}catch(error){console.error('Error deleting document:',error);toast.error('Erreur lors de la suppression du document');}};const openDeleteModal=doc=>{setDeletingDocument(doc);setShowDeleteModal(true);};const canDeleteDocument=doc=>{// Only document owner or admin can delete\nreturn(user===null||user===void 0?void 0:user.role)==='admin'||doc.uploader.id===(user===null||user===void 0?void 0:user.id);};const canAddCorrection=doc=>{// Only professors and admins can add corrections\nif((user===null||user===void 0?void 0:user.role)!=='professeur'&&(user===null||user===void 0?void 0:user.role)!=='admin')return false;// Can't add correction to PFE documents or documents that already have corrections\nif(doc.categorie==='pfe'||doc.correction||doc.correctionId)return false;return true;};const formatFileSize=bytes=>{const size=parseInt(bytes);if(size===0)return'0 B';const k=1024;const sizes=['B','KB','MB','GB'];const i=Math.floor(Math.log(size)/Math.log(k));return parseFloat((size/Math.pow(k,i)).toFixed(2))+' '+sizes[i];};const getCategoryIcon=categorie=>{switch(categorie){case'cours':return BookOpen;case'td':return FileText;case'tp':return FileIcon;case'examen':return Calendar;case'correction':return Star;case'pfe':return GraduationCap;default:return FileText;}};const getCategoryColor=categorie=>{switch(categorie){case'cours':return'bg-blue-100 text-blue-800';case'td':return'bg-green-100 text-green-800';case'tp':return'bg-purple-100 text-purple-800';case'examen':return'bg-red-100 text-red-800';case'correction':return'bg-yellow-100 text-yellow-800';case'pfe':return'bg-indigo-100 text-indigo-800';default:return'bg-gray-100 text-gray-800';}};const canUpload=(user===null||user===void 0?void 0:user.role)==='professeur'||(user===null||user===void 0?void 0:user.role)==='admin';if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"flex flex-col items-center space-y-4\",initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(motion.div,{className:\"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full\",animate:{rotate:360},transition:{duration:1,repeat:Infinity,ease:'linear'}}),/*#__PURE__*/_jsx(motion.p,{className:\"text-secondary-600 font-medium\",animate:{opacity:[0.5,1,0.5]},transition:{duration:1.5,repeat:Infinity},children:\"Chargement des documents...\"})]})});}return/*#__PURE__*/_jsxs(motion.div,{variants:containerVariants,initial:\"hidden\",animate:\"visible\",className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(motion.div,{variants:itemVariants,className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(motion.h1,{className:\"text-2xl font-bold text-gray-900\",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:0.3,duration:0.6},children:\"Documents\"}),/*#__PURE__*/_jsx(motion.p,{className:\"mt-1 text-sm text-gray-500\",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:0.4,duration:0.6},children:\"G\\xE9rez et consultez les documents acad\\xE9miques\"})]}),canUpload&&/*#__PURE__*/_jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:0.98},onClick:()=>setShowUploadModal(true),className:\"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:0.5,duration:0.6},children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4 mr-2\"}),\"Ajouter un document\"]})]}),/*#__PURE__*/_jsx(motion.div,{variants:itemVariants,className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher des documents...\",value:filters.search,onChange:e=>handleSearch(e.target.value),className:\"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsx(\"select\",{value:filters.categorie,onChange:e=>handleFilterChange('categorie',e.target.value),className:\"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",children:categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.value,children:cat.label},cat.value))}),/*#__PURE__*/_jsxs(\"select\",{value:filters.matiereId,onChange:e=>handleFilterChange('matiereId',e.target.value),className:\"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Toutes les mati\\xE8res\"}),matieres.map(matiere=>/*#__PURE__*/_jsxs(\"option\",{value:matiere.id,children:[matiere.nom,\" (\",matiere.code,\")\"]},matiere.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('grid'),className:\"p-2 rounded-md \".concat(viewMode==='grid'?'bg-primary-100 text-primary-600':'text-gray-400 hover:text-gray-600'),children:/*#__PURE__*/_jsx(Grid,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('list'),className:\"p-2 rounded-md \".concat(viewMode==='list'?'bg-primary-100 text-primary-600':'text-gray-400 hover:text-gray-600'),children:/*#__PURE__*/_jsx(List,{className:\"w-4 h-4\"})})]})]})}),documents.length===0?/*#__PURE__*/_jsxs(motion.div,{variants:itemVariants,className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(FileText,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Aucun document\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:filters.search||filters.categorie||filters.matiereId?'Aucun document ne correspond à vos critères de recherche.':'Aucun document disponible pour le moment.'})]}):/*#__PURE__*/_jsxs(motion.div,{variants:itemVariants,children:[viewMode==='grid'?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:/*#__PURE__*/_jsx(AnimatePresence,{children:documents.map((document,index)=>{const CategoryIcon=getCategoryIcon(document.categorie);return/*#__PURE__*/_jsxs(motion.div,{variants:cardVariants,whileHover:\"hover\",className:\"bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6\",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:index*0.1,duration:0.5},children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-gray-100 rounded-lg\",children:/*#__PURE__*/_jsx(CategoryIcon,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(getCategoryColor(document.categorie)),children:document.categorie.toUpperCase()})})]})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2 line-clamp-2\",children:document.titre}),document.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4 line-clamp-3\",children:document.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mb-4\",children:[document.matiere&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"w-4 h-4 mr-2\"}),document.matiere.nom]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 mr-2\"}),document.uploader.prenom,\" \",document.uploader.nom]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-2\"}),new Date(document.createdAt).toLocaleDateString('fr-FR')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:formatFileSize(document.tailleFichier)}),document.correction&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3 mr-1\"}),\"Corrig\\xE9\"]}),document.correctionId&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:[/*#__PURE__*/_jsx(FileCheck,{className:\"w-3 h-3 mr-1\"}),\"Correction\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleView(document),className:\"p-2 text-gray-400 hover:text-primary-600 transition-colors\",title:\"Voir les d\\xE9tails\",children:/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})}),canAddCorrection(document)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddCorrection(document),className:\"p-2 text-gray-400 hover:text-green-600 transition-colors\",title:\"Ajouter une correction\",children:/*#__PURE__*/_jsx(FileCheck,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownload(document),className:\"p-2 text-gray-400 hover:text-primary-600 transition-colors\",title:\"T\\xE9l\\xE9charger\",children:/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"})}),canDeleteDocument(document)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal(document),className:\"p-2 text-gray-400 hover:text-red-600 transition-colors\",title:\"Supprimer\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]})]},document.id);})})}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Document\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Cat\\xE9gorie\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Mati\\xE8re\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Auteur\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:/*#__PURE__*/_jsx(AnimatePresence,{children:documents.map((document,index)=>{var _document$matiere;const CategoryIcon=getCategoryIcon(document.categorie);return/*#__PURE__*/_jsxs(motion.tr,{className:\"hover:bg-gray-50\",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:index*0.05,duration:0.5},children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-gray-100 rounded-lg mr-3\",children:/*#__PURE__*/_jsx(CategoryIcon,{className:\"w-4 h-4 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:document.titre}),document.description&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 truncate max-w-xs\",children:document.description})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(getCategoryColor(document.categorie)),children:document.categorie.toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:((_document$matiere=document.matiere)===null||_document$matiere===void 0?void 0:_document$matiere.nom)||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:[document.uploader.prenom,\" \",document.uploader.nom]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(document.createdAt).toLocaleDateString('fr-FR')}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleView(document),className:\"text-primary-600 hover:text-primary-900\",title:\"Voir les d\\xE9tails\",children:/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})}),canAddCorrection(document)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddCorrection(document),className:\"text-green-600 hover:text-green-900\",title:\"Ajouter une correction\",children:/*#__PURE__*/_jsx(FileCheck,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownload(document),className:\"text-primary-600 hover:text-primary-900\",title:\"T\\xE9l\\xE9charger\",children:/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"})}),canDeleteDocument(document)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal(document),className:\"text-red-600 hover:text-red-900\",title:\"Supprimer\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})})]},document.id);})})})]})}),pagination.pages>1&&/*#__PURE__*/_jsxs(motion.div,{className:\"flex items-center justify-between\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.3,duration:0.5},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700\",children:[\"Affichage de \",(pagination.page-1)*pagination.limit+1,\" \\xE0\",' ',Math.min(pagination.page*pagination.limit,pagination.total),\" sur\",' ',pagination.total,\" r\\xE9sultats\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('page',pagination.page-1),disabled:pagination.page===1,className:\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Pr\\xE9c\\xE9dent\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-2 text-sm font-medium text-gray-700\",children:[\"Page \",pagination.page,\" sur \",pagination.pages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('page',pagination.page+1),disabled:pagination.page===pagination.pages,className:\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Suivant\"})]})]})]}),/*#__PURE__*/_jsx(DocumentUploadModal,{isOpen:showUploadModal,onClose:()=>setShowUploadModal(false),onSuccess:()=>{setShowUploadModal(false);fetchDocuments();}}),correctionParentDocument&&/*#__PURE__*/_jsx(CorrectionUploadModal,{isOpen:showCorrectionModal,onClose:()=>{setShowCorrectionModal(false);setCorrectionParentDocument(null);},parentDocumentId:correctionParentDocument.id,parentDocumentTitle:correctionParentDocument.titre,onSuccess:()=>{setShowCorrectionModal(false);setCorrectionParentDocument(null);fetchDocuments();toast.success('Correction ajoutée avec succès');}}),/*#__PURE__*/_jsx(Modal,{isOpen:showDeleteModal,onClose:()=>{setShowDeleteModal(false);setDeletingDocument(null);},title:\"Confirmer la suppression\",children:deletingDocument&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-secondary-600\",children:[\"\\xCAtes-vous s\\xFBr de vouloir supprimer le document\",' ',/*#__PURE__*/_jsx(\"strong\",{children:deletingDocument.titre}),\" ?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-amber-600\",children:\"Le document sera d\\xE9plac\\xE9 vers la corbeille et pourra \\xEAtre r\\xE9cup\\xE9r\\xE9 pendant 30 jours.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>{setShowDeleteModal(false);setDeletingDocument(null);},children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleDeleteDocument,children:\"Supprimer\"})]})]})})]});};export default Documents;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","FileText","Download","Eye","Search","Upload","BookOpen","Calendar","User","Star","Grid","List","FileIcon","GraduationCap","CheckCircle","FileCheck","Trash2","useAuth","documentsAPI","academicAPI","toast","DocumentUploadModal","CorrectionUploadModal","Modal","Button","useNavigate","jsx","_jsx","jsxs","_jsxs","Documents","_user$niveau","_user$niveau2","_user$niveau3","user","navigate","documents","setDocuments","matieres","setMatieres","loading","setLoading","uploading","setUploading","viewMode","setViewMode","showUploadModal","setShowUploadModal","showCorrectionModal","setShowCorrectionModal","correctionParentDocument","setCorrectionParentDocument","showDeleteModal","setShowDeleteModal","deletingDocument","setDeletingDocument","pagination","setPagination","page","limit","total","pages","filters","setFilters","search","categorie","matiereId","categories","value","label","role","niveau","nom","containerVariants","hidden","opacity","visible","transition","staggerChildren","delayChildren","itemVariants","y","scale","duration","ease","cardVariants","hover","fetchDocuments","fetchMatieres","response","getDocuments","undefined","data","error","console","getMatieres","handleSearch","prev","_objectSpread","handleFilterChange","key","handleDownload","doc","blob","downloadDocument","id","url","window","URL","createObjectURL","link","document","createElement","href","download","nomFichier","body","appendChild","click","removeChild","revokeObjectURL","success","handleView","concat","handleAddCorrection","handleDeleteDocument","deleteDocument","openDeleteModal","canDeleteDocument","uploader","canAddCorrection","correction","correctionId","formatFileSize","bytes","size","parseInt","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getCategoryIcon","getCategoryColor","canUpload","className","children","div","initial","animate","rotate","repeat","Infinity","p","variants","h1","x","delay","button","whileHover","whileTap","onClick","type","placeholder","onChange","e","target","map","cat","matiere","code","length","index","CategoryIcon","toUpperCase","titre","description","prenom","Date","createdAt","toLocaleDateString","tailleFichier","title","_document$matiere","tr","min","disabled","isOpen","onClose","onSuccess","parentDocumentId","parentDocumentTitle","variant"],"sources":["/Users/brahimkhalilkhalef/Projects/ISIArchive/frontend/src/pages/dashboard/Documents.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  FileText,\n  Download,\n  Eye,\n  Search,\n  Filter,\n  Upload,\n  BookOpen,\n  Calendar,\n  User,\n  MessageCircle,\n  Star,\n  Grid,\n  List,\n  ChevronDown,\n  FileIcon,\n  GraduationCap,\n  Plus,\n  X,\n  Loader2,\n  CheckCircle,\n  FileCheck,\n  Trash2,\n  Edit\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { documentsAPI, academicAPI } from '../../utils/api';\nimport { Document, Matiere, Filiere, Niveau } from '../../types';\nimport toast from 'react-hot-toast';\nimport DocumentUploadModal from '../../components/forms/DocumentUploadModal';\nimport { CorrectionUploadModal } from '../../components/forms/CorrectionUploadModal';\nimport Modal from '../../components/ui/Modal';\nimport Button from '../../components/ui/Button';\nimport { useNavigate } from 'react-router-dom';\n\ninterface DocumentFilters {\n  search: string;\n  categorie: string;\n  matiereId: string;\n  page: number;\n  limit: number;\n}\n\nconst Documents: React.FC = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [documents, setDocuments] = useState<Document[]>([]);\n  const [matieres, setMatieres] = useState<Matiere[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [uploading, setUploading] = useState(false);\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [showCorrectionModal, setShowCorrectionModal] = useState(false);\n  const [correctionParentDocument, setCorrectionParentDocument] = useState<Document | null>(null);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deletingDocument, setDeletingDocument] = useState<Document | null>(null);\n  const [pagination, setPagination] = useState({\n    page: 1,\n    limit: 20,\n    total: 0,\n    pages: 0\n  });\n\n  const [filters, setFilters] = useState<DocumentFilters>({\n    search: '',\n    categorie: '',\n    matiereId: '',\n    page: 1,\n    limit: 20\n  });\n\n  const categories = [\n    { value: '', label: 'Toutes les catégories' },\n    { value: 'cours', label: 'Cours' },\n    { value: 'td', label: 'TD' },\n    { value: 'tp', label: 'TP' },\n    { value: 'examen', label: 'Examens' },\n    ...(user?.role === 'etudiant' && (user?.niveau?.nom === 'L3' || user?.niveau?.nom === '3ING' || user?.niveau?.nom === 'M2') \n      ? [{ value: 'pfe', label: 'PFE' }] : [])\n  ];\n\n  // Animation variants matching Dashboard\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.1,\n        delayChildren: 0.2,\n      },\n    },\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 20, scale: 0.95 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      scale: 1,\n      transition: {\n        duration: 0.5,\n        ease: [0.25, 0.46, 0.45, 0.94],\n      },\n    },\n  };\n\n  const cardVariants = {\n    hidden: { opacity: 0, y: 30, scale: 0.9 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      scale: 1,\n      transition: {\n        duration: 0.6,\n        ease: [0.25, 0.46, 0.45, 0.94],\n      },\n    },\n    hover: {\n      y: -8,\n      scale: 1.02,\n      transition: {\n        duration: 0.3,\n        ease: 'easeOut',\n      },\n    },\n  };\n\n  useEffect(() => {\n    fetchDocuments();\n    fetchMatieres();\n  }, [filters]);\n\n  const fetchDocuments = async () => {\n    try {\n      setLoading(true);\n      const response = await documentsAPI.getDocuments({\n        page: filters.page,\n        limit: filters.limit,\n        search: filters.search || undefined,\n        categorie: filters.categorie || undefined,\n        matiereId: filters.matiereId || undefined\n      });\n\n      setDocuments(response.data);\n      setPagination(response.pagination || {\n        page: 1,\n        limit: 20,\n        total: 0,\n        pages: 0\n      });\n    } catch (error) {\n      console.error('Error fetching documents:', error);\n      toast.error('Erreur lors du chargement des documents');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMatieres = async () => {\n    try {\n      const response = await academicAPI.getMatieres();\n      setMatieres(response.data);\n    } catch (error) {\n      console.error('Error fetching matieres:', error);\n    }\n  };\n\n  const handleSearch = (value: string) => {\n    setFilters(prev => ({ ...prev, search: value, page: 1 }));\n  };\n\n  const handleFilterChange = (key: keyof DocumentFilters, value: string | number) => {\n    setFilters(prev => ({ ...prev, [key]: value, page: 1 }));\n  };\n\n  const handleDownload = async (doc: Document) => {\n    try {\n      const blob = await documentsAPI.downloadDocument(doc.id);\n      const url = window.URL.createObjectURL(blob);\n      const link = window.document.createElement('a');\n      link.href = url;\n      link.download = doc.nomFichier;\n      window.document.body.appendChild(link);\n      link.click();\n      window.document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      toast.success('Document téléchargé avec succès');\n    } catch (error) {\n      console.error('Error downloading document:', error);\n      toast.error('Erreur lors du téléchargement');\n    }\n  };\n\n  const handleView = (doc: Document) => {\n    navigate(`/documents/${doc.id}`);\n  };\n\n  const handleAddCorrection = (doc: Document) => {\n    setCorrectionParentDocument(doc);\n    setShowCorrectionModal(true);\n  };\n\n  const handleDeleteDocument = async () => {\n    if (!deletingDocument) return;\n\n    try {\n      await documentsAPI.deleteDocument(deletingDocument.id);\n      toast.success('Document supprimé avec succès');\n      setShowDeleteModal(false);\n      setDeletingDocument(null);\n      fetchDocuments(); // Refresh the list\n    } catch (error) {\n      console.error('Error deleting document:', error);\n      toast.error('Erreur lors de la suppression du document');\n    }\n  };\n\n  const openDeleteModal = (doc: Document) => {\n    setDeletingDocument(doc);\n    setShowDeleteModal(true);\n  };\n\n  const canDeleteDocument = (doc: Document) => {\n    // Only document owner or admin can delete\n    return user?.role === 'admin' || doc.uploader.id === user?.id;\n  };\n\n  const canAddCorrection = (doc: Document) => {\n    // Only professors and admins can add corrections\n    if (user?.role !== 'professeur' && user?.role !== 'admin') return false;\n    \n    // Can't add correction to PFE documents or documents that already have corrections\n    if (doc.categorie === 'pfe' || doc.correction || doc.correctionId) return false;\n    \n    return true;\n  };\n\n  const formatFileSize = (bytes: string) => {\n    const size = parseInt(bytes);\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getCategoryIcon = (categorie: string) => {\n    switch (categorie) {\n      case 'cours': return BookOpen;\n      case 'td': return FileText;\n      case 'tp': return FileIcon;\n      case 'examen': return Calendar;\n      case 'correction': return Star;\n      case 'pfe': return GraduationCap;\n      default: return FileText;\n    }\n  };\n\n  const getCategoryColor = (categorie: string) => {\n    switch (categorie) {\n      case 'cours': return 'bg-blue-100 text-blue-800';\n      case 'td': return 'bg-green-100 text-green-800';\n      case 'tp': return 'bg-purple-100 text-purple-800';\n      case 'examen': return 'bg-red-100 text-red-800';\n      case 'correction': return 'bg-yellow-100 text-yellow-800';\n      case 'pfe': return 'bg-indigo-100 text-indigo-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const canUpload = user?.role === 'professeur' || user?.role === 'admin';\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <motion.div\n          className=\"flex flex-col items-center space-y-4\"\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.5 }}\n        >\n          <motion.div\n            className=\"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full\"\n            animate={{ rotate: 360 }}\n            transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n          />\n          <motion.p\n            className=\"text-secondary-600 font-medium\"\n            animate={{ opacity: [0.5, 1, 0.5] }}\n            transition={{ duration: 1.5, repeat: Infinity }}\n          >\n            Chargement des documents...\n          </motion.p>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      className=\"space-y-6\"\n    >\n      {/* Header */}\n      <motion.div \n        variants={itemVariants}\n        className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\"\n      >\n        <div>\n          <motion.h1 \n            className=\"text-2xl font-bold text-gray-900\"\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: 0.3, duration: 0.6 }}\n          >\n            Documents\n          </motion.h1>\n          <motion.p \n            className=\"mt-1 text-sm text-gray-500\"\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: 0.4, duration: 0.6 }}\n          >\n            Gérez et consultez les documents académiques\n          </motion.p>\n        </div>\n        \n        {canUpload && (\n          <motion.button\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            onClick={() => setShowUploadModal(true)}\n            className=\"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: 0.5, duration: 0.6 }}\n          >\n            <Upload className=\"w-4 h-4 mr-2\" />\n            Ajouter un document\n          </motion.button>\n        )}\n      </motion.div>\n\n      {/* Filters */}\n      <motion.div \n        variants={itemVariants}\n        className=\"bg-white rounded-lg shadow p-6\"\n      >\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {/* Search */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n            <input\n              type=\"text\"\n              placeholder=\"Rechercher des documents...\"\n              value={filters.search}\n              onChange={(e) => handleSearch(e.target.value)}\n              className=\"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n            />\n          </div>\n\n          {/* Category Filter */}\n          <select\n            value={filters.categorie}\n            onChange={(e) => handleFilterChange('categorie', e.target.value)}\n            className=\"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n          >\n            {categories.map(cat => (\n              <option key={cat.value} value={cat.value}>{cat.label}</option>\n            ))}\n          </select>\n\n          {/* Matiere Filter */}\n          <select\n            value={filters.matiereId}\n            onChange={(e) => handleFilterChange('matiereId', e.target.value)}\n            className=\"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n          >\n            <option value=\"\">Toutes les matières</option>\n            {matieres.map(matiere => (\n              <option key={matiere.id} value={matiere.id}>\n                {matiere.nom} ({matiere.code})\n              </option>\n            ))}\n          </select>\n\n          {/* View Mode Toggle */}\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setViewMode('grid')}\n              className={`p-2 rounded-md ${viewMode === 'grid' ? 'bg-primary-100 text-primary-600' : 'text-gray-400 hover:text-gray-600'}`}\n            >\n              <Grid className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => setViewMode('list')}\n              className={`p-2 rounded-md ${viewMode === 'list' ? 'bg-primary-100 text-primary-600' : 'text-gray-400 hover:text-gray-600'}`}\n            >\n              <List className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Documents */}\n      {documents.length === 0 ? (\n        <motion.div \n          variants={itemVariants}\n          className=\"text-center py-12\"\n        >\n          <FileText className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Aucun document</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            {filters.search || filters.categorie || filters.matiereId\n              ? 'Aucun document ne correspond à vos critères de recherche.'\n              : 'Aucun document disponible pour le moment.'}\n          </p>\n        </motion.div>\n      ) : (\n        <motion.div variants={itemVariants}>\n          {viewMode === 'grid' ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <AnimatePresence>\n                {documents.map((document, index) => {\n                  const CategoryIcon = getCategoryIcon(document.categorie);\n                  return (\n                    <motion.div\n                      key={document.id}\n                      variants={cardVariants}\n                      whileHover=\"hover\"\n                      className=\"bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6\"\n                      initial={{ opacity: 0, y: 30 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.1, duration: 0.5 }}\n                    >\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"p-2 bg-gray-100 rounded-lg\">\n                            <CategoryIcon className=\"w-5 h-5 text-gray-600\" />\n                          </div>\n                          <div>\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getCategoryColor(document.categorie)}`}>\n                              {document.categorie.toUpperCase()}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2 line-clamp-2\">\n                        {document.titre}\n                      </h3>\n\n                      {document.description && (\n                        <p className=\"text-sm text-gray-600 mb-4 line-clamp-3\">\n                          {document.description}\n                        </p>\n                      )}\n\n                      <div className=\"space-y-2 mb-4\">\n                        {document.matiere && (\n                          <div className=\"flex items-center text-sm text-gray-500\">\n                            <BookOpen className=\"w-4 h-4 mr-2\" />\n                            {document.matiere.nom}\n                          </div>\n                        )}\n                        <div className=\"flex items-center text-sm text-gray-500\">\n                          <User className=\"w-4 h-4 mr-2\" />\n                          {document.uploader.prenom} {document.uploader.nom}\n                        </div>\n                        <div className=\"flex items-center text-sm text-gray-500\">\n                          <Calendar className=\"w-4 h-4 mr-2\" />\n                          {new Date(document.createdAt).toLocaleDateString('fr-FR')}\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className=\"text-sm text-gray-500\">\n                            {formatFileSize(document.tailleFichier)}\n                          </span>\n                          {document.correction && (\n                            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                              <CheckCircle className=\"w-3 h-3 mr-1\" />\n                              Corrigé\n                            </span>\n                          )}\n                          {document.correctionId && (\n                            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                              <FileCheck className=\"w-3 h-3 mr-1\" />\n                              Correction\n                            </span>\n                          )}\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            onClick={() => handleView(document)}\n                            className=\"p-2 text-gray-400 hover:text-primary-600 transition-colors\"\n                            title=\"Voir les détails\"\n                          >\n                            <Eye className=\"w-4 h-4\" />\n                          </button>\n                          {canAddCorrection(document) && (\n                            <button\n                              onClick={() => handleAddCorrection(document)}\n                              className=\"p-2 text-gray-400 hover:text-green-600 transition-colors\"\n                              title=\"Ajouter une correction\"\n                            >\n                              <FileCheck className=\"w-4 h-4\" />\n                            </button>\n                          )}\n                          <button\n                            onClick={() => handleDownload(document)}\n                            className=\"p-2 text-gray-400 hover:text-primary-600 transition-colors\"\n                            title=\"Télécharger\"\n                          >\n                            <Download className=\"w-4 h-4\" />\n                          </button>\n                          {canDeleteDocument(document) && (\n                            <button\n                              onClick={() => openDeleteModal(document)}\n                              className=\"p-2 text-gray-400 hover:text-red-600 transition-colors\"\n                              title=\"Supprimer\"\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    </motion.div>\n                  );\n                })}\n              </AnimatePresence>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Document\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Catégorie\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Matière\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Auteur\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Date\n                    </th>\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  <AnimatePresence>\n                    {documents.map((document, index) => {\n                      const CategoryIcon = getCategoryIcon(document.categorie);\n                      return (\n                        <motion.tr \n                          key={document.id} \n                          className=\"hover:bg-gray-50\"\n                          initial={{ opacity: 0, x: -20 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          transition={{ delay: index * 0.05, duration: 0.5 }}\n                        >\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\n                            <div className=\"flex items-center\">\n                              <div className=\"p-2 bg-gray-100 rounded-lg mr-3\">\n                                <CategoryIcon className=\"w-4 h-4 text-gray-600\" />\n                              </div>\n                              <div>\n                                <div className=\"text-sm font-medium text-gray-900\">\n                                  {document.titre}\n                                </div>\n                                {document.description && (\n                                  <div className=\"text-sm text-gray-500 truncate max-w-xs\">\n                                    {document.description}\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getCategoryColor(document.categorie)}`}>\n                              {document.categorie.toUpperCase()}\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                            {document.matiere?.nom || 'N/A'}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                            {document.uploader.prenom} {document.uploader.nom}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {new Date(document.createdAt).toLocaleDateString('fr-FR')}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                            <div className=\"flex items-center justify-end space-x-2\">\n                              <button\n                                onClick={() => handleView(document)}\n                                className=\"text-primary-600 hover:text-primary-900\"\n                                title=\"Voir les détails\"\n                              >\n                                <Eye className=\"w-4 h-4\" />\n                              </button>\n                              {canAddCorrection(document) && (\n                                <button\n                                  onClick={() => handleAddCorrection(document)}\n                                  className=\"text-green-600 hover:text-green-900\"\n                                  title=\"Ajouter une correction\"\n                                >\n                                  <FileCheck className=\"w-4 h-4\" />\n                                </button>\n                              )}\n                              <button\n                                onClick={() => handleDownload(document)}\n                                className=\"text-primary-600 hover:text-primary-900\"\n                                title=\"Télécharger\"\n                              >\n                                <Download className=\"w-4 h-4\" />\n                              </button>\n                              {canDeleteDocument(document) && (\n                                <button\n                                  onClick={() => openDeleteModal(document)}\n                                  className=\"text-red-600 hover:text-red-900\"\n                                  title=\"Supprimer\"\n                                >\n                                  <Trash2 className=\"w-4 h-4\" />\n                                </button>\n                              )}\n                            </div>\n                          </td>\n                        </motion.tr>\n                      );\n                    })}\n                  </AnimatePresence>\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {/* Pagination */}\n          {pagination.pages > 1 && (\n            <motion.div \n              className=\"flex items-center justify-between\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3, duration: 0.5 }}\n            >\n              <div className=\"text-sm text-gray-700\">\n                Affichage de {((pagination.page - 1) * pagination.limit) + 1} à{' '}\n                {Math.min(pagination.page * pagination.limit, pagination.total)} sur{' '}\n                {pagination.total} résultats\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => handleFilterChange('page', pagination.page - 1)}\n                  disabled={pagination.page === 1}\n                  className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Précédent\n                </button>\n                <span className=\"px-3 py-2 text-sm font-medium text-gray-700\">\n                  Page {pagination.page} sur {pagination.pages}\n                </span>\n                <button\n                  onClick={() => handleFilterChange('page', pagination.page + 1)}\n                  disabled={pagination.page === pagination.pages}\n                  className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Suivant\n                </button>\n              </div>\n            </motion.div>\n          )}\n        </motion.div>\n      )}\n\n      {/* Upload Modal */}\n      <DocumentUploadModal\n        isOpen={showUploadModal}\n        onClose={() => setShowUploadModal(false)}\n        onSuccess={() => {\n          setShowUploadModal(false);\n          fetchDocuments();\n        }}\n      />\n\n      {/* Correction Upload Modal */}\n      {correctionParentDocument && (\n        <CorrectionUploadModal\n          isOpen={showCorrectionModal}\n          onClose={() => {\n            setShowCorrectionModal(false);\n            setCorrectionParentDocument(null);\n          }}\n          parentDocumentId={correctionParentDocument.id}\n          parentDocumentTitle={correctionParentDocument.titre}\n          onSuccess={() => {\n            setShowCorrectionModal(false);\n            setCorrectionParentDocument(null);\n            fetchDocuments();\n            toast.success('Correction ajoutée avec succès');\n          }}\n        />\n      )}\n\n      {/* Delete Modal */}\n      <Modal\n        isOpen={showDeleteModal}\n        onClose={() => {\n          setShowDeleteModal(false);\n          setDeletingDocument(null);\n        }}\n        title=\"Confirmer la suppression\"\n      >\n        {deletingDocument && (\n          <div className=\"space-y-4\">\n            <p className=\"text-secondary-600\">\n              Êtes-vous sûr de vouloir supprimer le document{' '}\n              <strong>{deletingDocument.titre}</strong> ?\n            </p>\n            <p className=\"text-sm text-amber-600\">\n              Le document sera déplacé vers la corbeille et pourra être récupéré pendant 30 jours.\n            </p>\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setShowDeleteModal(false);\n                  setDeletingDocument(null);\n                }}\n              >\n                Annuler\n              </Button>\n              <Button\n                variant=\"danger\"\n                onClick={handleDeleteDocument}\n              >\n                Supprimer\n              </Button>\n            </div>\n          </div>\n        )}\n      </Modal>\n    </motion.div>\n  );\n};\n\nexport default Documents; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}